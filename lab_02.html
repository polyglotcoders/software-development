<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>
  <li id="lab_6_link"><a href="lab_06.html">Client Side Programming</a></li>
  <li id="lab_7_link"><a href="lab_07.html">Node</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19333600, 19330812, 19331307, 19332844, 19332156, 19333277, 19333402, 19328085, 19329199, 19330024, 19330719, 19333479, 19333239, 19328130, 19331525, 19329330, 19332376, 19331004, 19324670, 19327015, 19330955, 19327043, 19328451, 19333068, 19329208, 19330632, 19330608, 19329083, 19330262, 19331783, 19324417, 19330356, 19330572, 19328019, 19332665, 19331347, 19330898, 19331420, 19327264, 19325573, 19327183, 19330986, 19326637, 19322448, 19330974, 19329120, 19325361, 19331725, 19326631, 19332490, 19327351, 19326663, 19331068, 19323032, 19329862, 19325561, 19325548, 19321775, 19325805, 19321291, 19326838, 19327939, 19330117, 19332721, 19333351, 19325391, 19320217, 19331385, 19333563, 19330882, 19333525, 19332987, 19333505, 19315273, 19325715, 19325331, 19324766, 19325710, 19328962, 19321070, 19332842, 19328552, 19323123, 19330351, 19322669, 19327612, 19325570, 19325436, 19324373, 19320607, 19323844, 19328635, 19325302, 19330431, 19329264, 19322834, 19318898, 19321270, 19331277, 19319695, 19321124, 19331912, 19324971, 19325074, 19320136, 19328637, 19328547, 19318341, 19321366, 19307233, 19308535, 19324604, 19329679, 19322711, 19322998, 19332285, 19319215, 19319233, 19311750, 19319489, 19323753, 19320505, 19321521, 19315935, 19321218, 19316737, 19319499, 19320117, 19329018, 19321900, 19319284, 19313584, 19321333, 19311179, 19322518, 19329137, 19315191, 19331565, 19326544, 19324941, 19330634, 19314646, 19328341, 19315295, 19329572, 19329723, 19318498, 19316247, 19303948, 19314681, 19316319, 19327146, 19310358, 19321074, 19311970, 19316491, 19331065, 19324586, 19329603, 19324260, 19321637, 19330057, 19330044, 19325556, 19307855, 19310950, 19318685, 19318464, 19329468, 19319110, 19316546, 19311279, 19321034, 19312565, 19322651, 19316113, 19328016, 19310638, 19316976, 19320608, 19323483, 19320270, 19311003, 19329533, 19310526, 19316110, 19316228, 19321217, 19329490, 19304802, 19311578, 19316728, 19330382, 19321963, 19330358, 19321262, 19313850, 19321609, 19314999, 19321330, 19328350, 19330142, 19327168, 19312028, 19316161, 19315715, 19325293, 19313726, 19322729, 19321619, 19321044, 19329600, 19311145, 19314076, 19329703, 19304857, 19315908, 19313813, 19307759, 19312332, 19308185, 19326070, 19324878, 19312154, 19316729, 19308598, 19311118, 19309888, 19325679, 19318649, 19318939, 19322953, 19331148, 19320553, 19311379, 19326973, 19312992, 19307160, 19324198, 19326147, 19313562, 19315593, 19308366, 19306309, 19308219, 19307740, 19316209, 19308919, 19318523, 19328828, 19327805, 19327251, 19328780, 19306032, 19329171, 19319317, 19312499, 19316222, 19306666, 19322628, 19327687, 19313794, 19304400, 19315098, 19325811, 19310403, 19311301, 19312318, 19309927, 19311090, 19322842, 19312584, 19325251, 19316119, 19309821, 19327929, 19312210, 19308430, 19326994, 19328382, 19306280, 19315024, 19328274, 19325371, 19322356, 19316052, 19313326, 19327340, 19307009, 19307787, 19321387, 19303958, 19309764, 19314690, 19307341, 19310472, 19327943, 19309701, 19326555, 19310845, 19308250, 19327079, 19305207, 19318707, 19309887, 19311738, 19307372, 19319273, 19313849, 19307368, 19304326, 19318379, 19316955, 19324441, 19322183, 19308088, 19310879, 19326622, 19312643, 19305408, 19305018, 19312327, 19304014, 19310747, 19311649, 19319160, 19311708, 19326388, 19327149, 19308512, 19309293, 19304200, 19322260, 19314082, 19325236, 19313071, 19306491, 19312960, 19319935, 19314955, 19319880, 19323159, 19314501, 19317220, 19324211, 19309121, 19305258, 19307122, 19319325, 19323979, 19307243, 19319795, 19326662, 19315100, 19325119, 19305228, 19316413, 19304655, 19313042, 19304158, 19313698, 19323833, 19319456, 19305336, 19310301, 19324528, 19326130, 19305823, 19320293, 19317257, 19314953, 19312457, 19317124, 19304527, 19319601, 19321120, 19319579, 19328729, 19324531, 19320941, 19324985, 19310730, 19308982, 19322887, 19313068, 19313064, 19325547, 19319246, 19306132, 19319603, 19314243, 19322035, 19322707, 19323885, 19316236, 19325300, 19306737, 19308873, 19315467, 19321388, 19318281, 19315122, 19321059, 19323084, 19314688, 19314489, 19304178, 19315953, 19307745, 19322342, 19304486, 19324582, 19324490, 19317263, 19312822, 19312352, 19314860, 19323916, 19314227, 19307523, 19323316, 19312404, 19323122, 19310022, 19308524, 19316509, 19316744, 19311856, 19319349, 19307533, 19314327, 19322168, 19317209, 19303666, 19317171, 19310337, 19318492, 19311326, 19313923, 19314522, 19312209, 19312047, 19311703, 19320549, 19320284, 19320228, 19310979, 19319797, 19319788, 19308625, 19314790, 19312311, 19311814, 19309069, 19316291, 19314006, 19319173, 19319157, 19324782, 19305131, 19313552, 19315542, 19313367, 19313533, 19318694, 19309362, 19318561, 19316605, 19318460, 19314711, 19317984, 19313918, 19307212, 19313821, 19315976, 19315748, 19308788, 19305860, 19315479, 19315325, 19311923, 19322032, 19312183, 19311778, 19310385, 19313902, 19316555, 19305950, 19312633, 19310235, 19307392, 19315704, 19306878, 19315410, 19318414, 19304000, 19314340, 19314230, 19309587, 19314183]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19333600, 19330812, 19331307, 19332844, 19332156, 19333277, 19333402, 19328085, 19329199, 19330024]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;tlrobinson&#8217;, &#8216;descendants&#8217;: 37, &#8216;id&#8217;: 19333600, &#8216;kids&#8217;: [19333829, 19333993, 19333938, 19333999, 19333766, 19333998, 19333818, 19333779, 19333975, 19333842, 19333943, 19333981, 19333813, 19333821, 19333764, 19333823], &#8216;score&#8217;: 69, &#8216;time&#8217;: 1552000363, &#8216;title&#8217;: &#8216;800M Emails Leaked Online by Email Verification Service&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://securitydiscovery.com/800-million-emails-leaked-online-by-email-verification-service/&#8217;}, {&#8217;by&#8217;: &#8216;c_t_montgomery&#8217;, &#8216;descendants&#8217;: 243, &#8216;id&#8217;: 19330812, &#8216;kids&#8217;: [19331981, 19331574, 19332971, 19331322, 19331257, 19331927, 19332787, 19331520, 19331994, 19332823, 19331317, 19331656, 19331990, 19331670, 19333696, 19331393, 19333692, 19332507, 19333393, 19331328, 19331383, 19331396, 19331499, 19332764], &#8216;score&#8217;: 277, &#8216;time&#8217;: 1551984184, &#8216;title&#8217;: &#8216;Airbnb to Acquire HotelTonight&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://press.airbnb.com/airbnb-signs-agreement-to-acquire-hoteltonight/&#8217;}, {&#8217;by&#8217;: &#8216;devilcius&#8217;, &#8216;descendants&#8217;: 83, &#8216;id&#8217;: 19331307, &#8216;kids&#8217;: [19332434, 19333432, 19332346, 19332599, 19332648, 19332041, 19332154, 19333850, 19332260, 19332297, 19333212, 19332519, 19333693, 19332050, 19332877, 19333350, 19332168, 19332435, 19332776, 19333761, 19333743, 19333414, 19333388, 19332298, 19332045, 19332704, 19332015, 19332025], &#8216;score&#8217;: 143, &#8216;time&#8217;: 1551986942, &#8216;title&#8217;: &#8220;What&#8217;s the minimum number of words you&#8217;d need to define all other words? (2012)&#8221;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.reddit.com/r/AskReddit/comments/sxqt5/what_is_the_minimum_number_of_words_that_you/&#8217;}, {&#8217;by&#8217;: &#8216;lrsjng&#8217;, &#8216;descendants&#8217;: 11, &#8216;id&#8217;: 19332844, &#8216;kids&#8217;: [19333992, 19333744, 19333587, 19333892, 19333237, 19333248, 19333745], &#8216;score&#8217;: 68, &#8216;time&#8217;: 1551995307, &#8216;title&#8217;: &#8216;Too Clever by Half&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.epsilontheory.com/too-clever-by-half/&#8217;}, {&#8217;by&#8217;: &#8216;mgartner&#8217;, &#8216;descendants&#8217;: 36, &#8216;id&#8217;: 19332156, &#8216;kids&#8217;: [19332930, 19333130, 19332785, 19333956, 19332928, 19333776, 19333265, 19332970, 19333639, 19332957, 19333719, 19332722, 19333196, 19333033], &#8216;score&#8217;: 67, &#8216;time&#8217;: 1551991404, &#8216;title&#8217;: &#8216;Stop Wasting Connections, Use <span class="caps">HTTP</span> Keep-Alive&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://lob.com/blog/use-http-keep-alive&#8217;}, {&#8217;by&#8217;: &#8216;bookofjoe&#8217;, &#8216;descendants&#8217;: 7, &#8216;id&#8217;: 19333277, &#8216;kids&#8217;: [19333791, 19333632, 19333631, 19333959, 19333807, 19333714], &#8216;score&#8217;: 17, &#8216;time&#8217;: 1551998101, &#8216;title&#8217;: &#8216;Why do old books smell?&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.bookofjoe.com/2019/03/why-do-old-books-smell.html&#8217;}, {&#8217;by&#8217;: &#8216;mnem&#8217;, &#8216;descendants&#8217;: 2, &#8216;id&#8217;: 19333402, &#8216;kids&#8217;: [19333924, 19333866], &#8216;score&#8217;: 22, &#8216;time&#8217;: 1551998910, &#8216;title&#8217;: &#8216;A framework for creating Python/C++ polyglots&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://github.com/wmww/Python-plus-plus&#8217;}, {&#8217;by&#8217;: &#8216;iBelieve&#8217;, &#8216;descendants&#8217;: 217, &#8216;id&#8217;: 19328085, &#8216;kids&#8217;: [19328565, 19329275, 19329034, 19328632, 19329860, 19329205, 19328627, 19333845, 19328516, 19331494, 19329121, 19332069, 19331970, 19330276, 19332288, 19328916, 19328996, 19331179, 19331167, 19330348, 19329393, 19329221, 19331922, 19330245, 19328605, 19331103, 19329145, 19328695, 19328585, 19331083, 19329448, 19328312, 19328315, 19328298, 19328280], &#8216;score&#8217;: 335, &#8216;time&#8217;: 1551967784, &#8216;title&#8217;: &#8216;PureOS is convergent&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://puri.sm/posts/converging-on-convergence-pureos-is-convergent-welcome-to-the-future/&#8217;}, {&#8217;by&#8217;: &#8216;elorant&#8217;, &#8216;descendants&#8217;: 70, &#8216;id&#8217;: 19329199, &#8216;kids&#8217;: [19329841, 19330991, 19330895, 19330191, 19329970, 19330761, 19331587, 19333161, 19332479, 19331118], &#8216;score&#8217;: 169, &#8216;time&#8217;: 1551975171, &#8216;title&#8217;: &#8216;Black Hole Propulsion as Technosignature&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.centauri-dreams.org/2019/03/06/black-hole-propulsion-as-technosignature/&#8217;}, {&#8217;by&#8217;: &#8216;tosh&#8217;, &#8216;descendants&#8217;: 84, &#8216;id&#8217;: 19330024, &#8216;kids&#8217;: [19332730, 19332478, 19332047, 19331122, 19331416, 19333331, 19331535, 19330567, 19331738, 19333431, 19332240, 19330672, 19332024, 19331146, 19330880], &#8216;score&#8217;: 156, &#8216;time&#8217;: 1551979953, &#8216;title&#8217;: &#8216;Scheduling in React&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://philippspiess.com/scheduling-in-react/&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
