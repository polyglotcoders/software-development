<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>
  <li id="lab_6_link"><a href="lab_06.html">Client Side Programming</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19179388, 19178885, 19178757, 19179404, 19178593, 19178835, 19168075, 19178614, 19170197, 19178215, 19175465, 19177435, 19161440, 19178776, 19173497, 19176469, 19166840, 19178282, 19174081, 19160994, 19164871, 19170950, 19178532, 19170945, 19177077, 19161259, 19161368, 19152561, 19176578, 19171402, 19170968, 19178624, 19170955, 19178100, 19174814, 19164294, 19170671, 19168442, 19161515, 19177859, 19177045, 19173684, 19175003, 19176541, 19176331, 19171632, 19174860, 19177116, 19173353, 19173995, 19161306, 19174236, 19170925, 19161012, 19173660, 19161171, 19169798, 19173473, 19172165, 19155826, 19160136, 19155643, 19170959, 19163522, 19164132, 19177674, 19153713, 19172260, 19173326, 19164037, 19162382, 19170584, 19166326, 19160053, 19171003, 19176040, 19164491, 19163724, 19166233, 19165928, 19174959, 19166201, 19175181, 19163281, 19163081, 19165286, 19164546, 19159828, 19158854, 19162876, 19178321, 19170294, 19172417, 19170004, 19163316, 19161028, 19171257, 19160659, 19161472, 19167539, 19171694, 19163616, 19156865, 19172097, 19166020, 19153616, 19162729, 19169013, 19166939, 19160076, 19169894, 19160703, 19178302, 19170566, 19165923, 19175712, 19161130, 19170396, 19171326, 19178153, 19153953, 19175051, 19171277, 19161564, 19175208, 19178124, 19160248, 19151561, 19171099, 19161648, 19149822, 19157708, 19171555, 19165368, 19161457, 19151783, 19172718, 19162405, 19177480, 19156718, 19159853, 19153480, 19169934, 19152030, 19176548, 19169813, 19154082, 19172630, 19171606, 19173203, 19166910, 19152245, 19162854, 19162226, 19168588, 19169938, 19163538, 19163302, 19161638, 19167763, 19167777, 19151969, 19169926, 19155205, 19167504, 19174840, 19165949, 19171319, 19158969, 19173922, 19165749, 19159077, 19176376, 19150512, 19174688, 19156797, 19158700, 19158198, 19168601, 19161313, 19153520, 19158771, 19173994, 19171559, 19175753, 19153388, 19162528, 19162321, 19161333, 19165244, 19174155, 19151204, 19155239, 19153203, 19151496, 19171878, 19149462, 19155715, 19156183, 19151213, 19165512, 19165478, 19152364, 19152474, 19161304, 19152193, 19170901, 19152416, 19157696, 19152001, 19154140, 19150899, 19153114, 19175787, 19150268, 19158762, 19160808, 19161108, 19149192, 19175574, 19172667, 19159064, 19168556, 19153166, 19166620, 19149696, 19156214, 19160387, 19171018, 19151787, 19148976, 19161438, 19158197, 19174777, 19171150, 19149509, 19176736, 19154346, 19156648, 19175722, 19161539, 19176662, 19150561, 19156570, 19164400, 19173089, 19162978, 19175548, 19151271, 19152683, 19176564, 19164376, 19156671, 19160913, 19174093, 19163113, 19176524, 19164111, 19150794, 19172431, 19164453, 19158602, 19166236, 19149452, 19153897, 19163646, 19165700, 19166268, 19155290, 19159262, 19155181, 19169555, 19154865, 19162011, 19151476, 19176152, 19171472, 19152423, 19165958, 19152182, 19156678, 19166373, 19165877, 19174192, 19169368, 19155586, 19149792, 19151123, 19175664, 19151567, 19165667, 19162106, 19149321, 19166938, 19166933, 19161960, 19175405, 19149690, 19161612, 19154724, 19158045, 19153879, 19161429, 19175156, 19164488, 19157197, 19156809, 19169212, 19170782, 19153003, 19152986, 19160864, 19153474, 19174675, 19167882, 19164680, 19164628, 19173819, 19160307, 19167398, 19152477, 19160037, 19160254, 19149100, 19155702, 19159719, 19164053, 19149000, 19156424, 19165160, 19166337, 19155570, 19151116, 19169478, 19155284, 19169319, 19158565, 19157691, 19174983, 19167202, 19157562, 19160573, 19156842, 19168797, 19151502, 19156354, 19169759, 19160186, 19156853, 19164259, 19168951, 19162268, 19153917, 19148983, 19159880, 19159827, 19150856, 19159918, 19166065, 19170986, 19153751, 19167022, 19154204, 19159049, 19157606, 19148901, 19151714, 19156756, 19159686, 19169752, 19151795, 19166520, 19169682, 19155495, 19153975, 19157128, 19158574, 19153673, 19167912, 19167904, 19154012, 19162084, 19159770, 19157293, 19169124, 19152720, 19167181, 19152537, 19163599, 19152215, 19152175, 19166765, 19166794, 19175300, 19166089, 19155655, 19165619, 19157290, 19151931, 19162809, 19165316, 19165257, 19150795, 19158955, 19154162, 19156553, 19161489, 19161128, 19170719, 19149804, 19153878, 19161434, 19157751, 19161234, 19148908, 19148903, 19167530, 19167406, 19153978, 19149423, 19160208, 19166918, 19152860, 19166730, 19166657, 19159862, 19166115, 19155167, 19159165, 19165164, 19165097, 19160650, 19160619, 19150748, 19155544, 19160392, 19153190, 19153053, 19156962, 19152821, 19162264, 19159397, 19154466, 19151922, 19150056, 19161518, 19159094, 19158966, 19154119, 19154015, 19153873, 19158585, 19153338, 19153052, 19150680, 19154476, 19157481, 19156504, 19149178, 19159909, 19154374, 19159967, 19151673, 19153332, 19149832, 19170563, 19159031, 19158658, 19158628, 19158581, 19152105, 19148938, 19148929, 19154216, 19158380, 19158184, 19157953, 19163369, 19155884, 19150914, 19149866, 19149828, 19154125, 19149479, 19149255, 19149030, 19153426, 19153037, 19152391, 19153447, 19152701, 19151220, 19151577, 19150270, 19150196, 19169903, 19158241, 19157694, 19161998, 19149284]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19179388, 19178885, 19178757, 19179404, 19178593, 19178835, 19168075, 19178614, 19170197, 19178215]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;osivertsson&#8217;, &#8216;descendants&#8217;: 2, &#8216;id&#8217;: 19179388, &#8216;kids&#8217;: [19179580, 19179587], &#8216;score&#8217;: 32, &#8216;time&#8217;: 1550335018, &#8216;title&#8217;: &#8216;Western Digital’s <span class="caps">RISC</span>-V “SweRV” Core Design Released for Free&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.anandtech.com/show/13964/western-digitals-riscv-swerv-core-released-for-free&#8217;}, {&#8217;by&#8217;: &#8216;stargrave&#8217;, &#8216;descendants&#8217;: 29, &#8216;id&#8217;: 19178885, &#8216;kids&#8217;: [19179276, 19179603, 19179327, 19179307, 19179622, 19179278, 19179519, 19179440, 19179487, 19179384, 19179258, 19179420, 19179300], &#8216;score&#8217;: 66, &#8216;time&#8217;: 1550330085, &#8216;title&#8217;: &#8216;We Must Revive Gopherspace (2017)&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://box.matto.nl/revivegopher.html&#8217;}, {&#8217;by&#8217;: &#8216;jonseitz&#8217;, &#8216;descendants&#8217;: 169, &#8216;id&#8217;: 19178757, &#8216;kids&#8217;: [19179409, 19179260, 19178834, 19179149, 19179302, 19179594, 19178833, 19179144, 19178802, 19178820, 19178863, 19179009, 19179544, 19178815, 19178785, 19179319, 19178782, 19179143, 19178904, 19178943, 19179447, 19178792, 19179554, 19178823, 19178789, 19178830, 19179122, 19178850, 19178797, 19179202, 19179228, 19178922], &#8216;score&#8217;: 107, &#8216;time&#8217;: 1550328773, &#8216;title&#8217;: &#8216;Google .dev domain early access&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://domains.google/tld/dev/&#8217;}, {&#8217;by&#8217;: &#8216;DanBC&#8217;, &#8216;descendants&#8217;: 6, &#8216;id&#8217;: 19179404, &#8216;kids&#8217;: [19179602, 19179640, 19179609, 19179605], &#8216;score&#8217;: 20, &#8216;time&#8217;: 1550335144, &#8216;title&#8217;: &#8220;We ignored evidence linking cigarettes to cancer. Let&#8217;s not do that with vaping&#8221;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.theguardian.com/commentisfree/2019/feb/16/we-ignored-the-evidence-linking-cigarettes-to-cancer-lets-not-do-that-with-vaping&#8217;}, {&#8217;by&#8217;: &#8216;furcyd&#8217;, &#8216;descendants&#8217;: 31, &#8216;id&#8217;: 19178593, &#8216;kids&#8217;: [19179082, 19179332, 19179523, 19179209, 19179517, 19179508, 19179090, 19179020], &#8216;score&#8217;: 111, &#8216;time&#8217;: 1550326027, &#8216;title&#8217;: &#8216;Classic Mathematics Books for Lifelong Learners&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://medium.com/however-mathematics/13-classic-mathematics-books-for-lifelong-learners-7ec2759142da&#8217;}, {&#8217;by&#8217;: &#8216;DyslexicAtheist&#8217;, &#8216;descendants&#8217;: 2, &#8216;id&#8217;: 19178835, &#8216;kids&#8217;: [19179591, 19179471], &#8216;score&#8217;: 12, &#8216;time&#8217;: 1550329555, &#8216;title&#8217;: &#8216;Losing Your Privacy in the Digital Age: Share Your Stories&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.nytimes.com/2019/02/13/opinion/internet-privacy.html&#8217;}, {&#8217;by&#8217;: &#8216;pplonski86&#8217;, &#8216;descendants&#8217;: 40, &#8216;id&#8217;: 19168075, &#8216;kids&#8217;: [19179064, 19178260, 19177923, 19178610, 19178487, 19179266, 19178112, 19178443, 19177532, 19177769, 19178495, 19178481, 19178084], &#8216;score&#8217;: 183, &#8216;time&#8217;: 1550198803, &#8216;title&#8217;: &#8216;Google needed to build a graph serving system&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://blog.dgraph.io/post/why-google-needed-graph-serving-system/&#8217;}, {&#8217;by&#8217;: &#8216;howard941&#8217;, &#8216;descendants&#8217;: 12, &#8216;id&#8217;: 19178614, &#8216;kids&#8217;: [19179257, 19179547, 19179293, 19179413, 19179485], &#8216;score&#8217;: 42, &#8216;time&#8217;: 1550326204, &#8216;title&#8217;: &#8216;New experimental drug rapidly repairs age-related memory loss and improves mood&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://newatlas.com/experimental-drug-prevents-memory-loss-depression/58489/&#8217;}, {&#8217;by&#8217;: &#8216;dnetesn&#8217;, &#8216;descendants&#8217;: 1, &#8216;id&#8217;: 19170197, &#8216;kids&#8217;: <sup class="footnote" id="fnr19179607"><a href="#fn19179607">19179607</a></sup>, &#8216;score&#8217;: 16, &#8216;time&#8217;: 1550232618, &#8216;title&#8217;: &#8216;When Gravity Breaks Down&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://nautil.us/blog/when-gravity-breaks-down&#8217;}, {&#8217;by&#8217;: &#8216;edent&#8217;, &#8216;descendants&#8217;: 36, &#8216;id&#8217;: 19178215, &#8216;kids&#8217;: [19178679, 19178700, 19178729, 19178874, 19178732, 19179551, 19178791, 19178974, 19178857, 19178703, 19178890, 19179598, 19178709, 19178868, 19178824, 19178686, 19178826, 19178699, 19178680, 19178668, 19178647, 19178784, 19178958], &#8216;score&#8217;: 62, &#8216;time&#8217;: 1550317652, &#8216;title&#8217;: &#8216;Is it creepy when brands pester you on social media?&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://shkspr.mobi/blog/2019/02/is-it-creepy-when-brands-pester-you-on-social-media/&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
