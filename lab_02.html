<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>
  <li id="lab_6_link"><a href="lab_06.html">Client Side Programming</a></li>
  <li id="lab_7_link"><a href="lab_07.html">Node</a></li>
  <li id="lab_8_link"><a href="lab_08.html">React</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19431444, 19433610, 19430487, 19432957, 19429724, 19430684, 19432758, 19429630, 19432702, 19432953, 19428700, 19420212, 19430630, 19431005, 19419295, 19425276, 19433831, 19433344, 19429719, 19432661, 19425485, 19428032, 19415735, 19421063, 19430971, 19429887, 19430187, 19428433, 19429249, 19423452, 19432788, 19429522, 19430880, 19429544, 19432929, 19431436, 19423806, 19428796, 19428066, 19423369, 19432563, 19429193, 19419567, 19424041, 19423827, 19420368, 19426062, 19428048, 19433018, 19431518, 19431994, 19418491, 19432603, 19431927, 19422833, 19423539, 19427332, 19433113, 19430696, 19428278, 19425243, 19425589, 19424428, 19416159, 19425844, 19431412, 19428475, 19420408, 19426186, 19428353, 19429792, 19423036, 19430990, 19419403, 19428060, 19420532, 19429590, 19418570, 19430773, 19420454, 19430291, 19423770, 19426573, 19425637, 19414511, 19425774, 19422310, 19428794, 19428021, 19424106, 19420557, 19423470, 19424614, 19413786, 19413436, 19424311, 19425708, 19418224, 19432299, 19429857, 19422780, 19430488, 19423434, 19429829, 19424802, 19416560, 19422333, 19420977, 19432016, 19431091, 19426570, 19422342, 19423464, 19420834, 19426538, 19428380, 19423228, 19425065, 19431736, 19418997, 19428208, 19430999, 19425693, 19424914, 19419886, 19427075, 19415983, 19423278, 19416678, 19425170, 19419451, 19423635, 19424145, 19422361, 19422419, 19421166, 19419279, 19413195, 19421815, 19416485, 19424372, 19417619, 19411485, 19421612, 19417877, 19413127, 19421227, 19419025, 19420590, 19426104, 19418782, 19419486, 19414019, 19411336, 19428391, 19415484, 19413964, 19426660, 19421697, 19412084, 19418218, 19430579, 19424762, 19421698, 19418543, 19420628, 19421032, 19419825, 19413469, 19412667, 19422749, 19421904, 19418770, 19412911, 19415362, 19414775, 19422671, 19418101, 19409367, 19413262, 19415765, 19413271, 19415445, 19421791, 19427743, 19413214, 19427598, 19415186, 19420952, 19413634, 19423288, 19415973, 19411797, 19420971, 19413569, 19417561, 19410111, 19414092, 19413159, 19420846, 19423298, 19419748, 19415066, 19424204, 19429611, 19421486, 19411731, 19421301, 19426701, 19429550, 19413454, 19410233, 19417640, 19414275, 19427774, 19412478, 19421988, 19422281, 19421732, 19420141, 19424625, 19421467, 19429200, 19416085, 19429175, 19409611, 19421476, 19429115, 19429109, 19414733, 19426067, 19413444, 19425476, 19425318, 19417241, 19427554, 19425848, 19416094, 19425153, 19413027, 19430775, 19419389, 19411641, 19427411, 19423116, 19413348, 19412420, 19422383, 19423578, 19414591, 19411159, 19416584, 19409902, 19411732, 19423559, 19426704, 19416295, 19408810, 19417797, 19416032, 19423115, 19421516, 19410972, 19413852, 19409584, 19427450, 19409618, 19414087, 19425349, 19420810, 19411799, 19409975, 19414627, 19424161, 19415001, 19413901, 19416167, 19410187, 19413448, 19416740, 19414164, 19412088, 19408597, 19427325, 19422919, 19412301, 19410659, 19413727, 19424915, 19419732, 19427178, 19427148, 19414278, 19411998, 19421829, 19424350, 19424248, 19418701, 19427931, 19408882, 19425423, 19411961, 19414205, 19426405, 19409014, 19411927, 19426221, 19409429, 19408875, 19424490, 19424734, 19424066, 19422587, 19418617, 19418597, 19422186, 19417757, 19408731, 19425355, 19421653, 19423136, 19414270, 19417483, 19413637, 19408866, 19417110, 19417327, 19415887, 19414414, 19416596, 19416879, 19426012, 19410536, 19413193, 19409907, 19423049, 19411548, 19413600, 19421030, 19413288, 19421303, 19415427, 19411648, 19412778, 19409046, 19425112, 19422028, 19418142, 19426019, 19424414, 19411513, 19421155, 19421077, 19424029, 19423950, 19418672, 19408847, 19423581, 19418775, 19420515, 19423324, 19411777, 19423286, 19423187, 19423033, 19412853, 19423147, 19417229, 19409391, 19428782, 19409080, 19421920, 19418980, 19417030, 19411863, 19412694, 19413189, 19417970, 19408576, 19410683, 19415941, 19410735, 19417336, 19416897, 19410981, 19423671, 19417827, 19417634, 19417631, 19411669, 19413142, 19417143, 19411572, 19418823, 19412394, 19413339, 19411713, 19412750, 19417445, 19415309, 19408777, 19412307, 19418863, 19415679, 19412978, 19411252, 19412800, 19431086, 19414548, 19414372, 19411971, 19408742, 19411459, 19412943, 19409625, 19412700, 19408572, 19429881, 19411153, 19410349, 19409181, 19414057, 19409513, 19409244, 19409469, 19410928, 19430663, 19418244, 19427204, 19415599, 19427053, 19408735, 19421357, 19432362, 19422195, 19428102, 19425046, 19410510, 19412295]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19431444, 19433610, 19430487, 19432957, 19429724, 19430684, 19432758, 19429630, 19432702, 19432953]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;collinmanderson&#8217;, &#8216;descendants&#8217;: 136, &#8216;id&#8217;: 19431444, &#8216;kids&#8217;: [19433394, 19434195, 19434017, 19432569, 19432755, 19432149, 19432323, 19432432, 19432803, 19432242, 19432229, 19432722, 19433702, 19433541, 19433389, 19431448, 19433411, 19433413, 19432548, 19433736, 19433662, 19433274, 19433977, 19433034, 19433647, 19433768, 19432911, 19433163, 19433190, 19432652, 19432410, 19432464, 19432500, 19433579, 19432400, 19432199, 19432558, 19433641], &#8216;score&#8217;: 258, &#8216;time&#8217;: 1553007880, &#8216;title&#8217;: &#8216;Open Source Doesn’t Make Money Because It Isn’t Designed to Make Money&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://www.ianbicking.org/blog/2019/03/open-source-doesnt-make-money-by-design.html&#8217;}, {&#8217;by&#8217;: &#8216;tmm&#8217;, &#8216;descendants&#8217;: 5, &#8216;id&#8217;: 19433610, &#8216;kids&#8217;: [19434105, 19434158, 19433956, 19434145], &#8216;score&#8217;: 45, &#8216;time&#8217;: 1553018687, &#8216;title&#8217;: &#8216;Kickstarter’s Staff Is Unionizing&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.theverge.com/2019/3/19/18254995/kickstarter-unionizing-union-representation-inclusivity-transparency-tech-us-crowdfunding&#8217;}, {&#8217;by&#8217;: &#8216;MichaelBurge&#8217;, &#8216;descendants&#8217;: 71, &#8216;id&#8217;: 19430487, &#8216;kids&#8217;: [19434164, 19433063, 19432530, 19434027, 19433221, 19431791, 19434025, 19434029, 19431199, 19433204, 19431304, 19430826, 19432505, 19431155, 19431585, 19432011, 19431708, 19431918], &#8216;score&#8217;: 232, &#8216;time&#8217;: 1553001535, &#8216;title&#8217;: &#8216;Implementing a <span class="caps">NES</span> Emulator in Rust&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://www.michaelburge.us/2019/03/18/nes-design.html&#8217;}, {&#8217;by&#8217;: &#8216;valgaze&#8217;, &#8216;descendants&#8217;: 156, &#8216;id&#8217;: 19432957, &#8216;kids&#8217;: [19433426, 19433493, 19433535, 19433216, 19433933, 19433200, 19433141, 19433753, 19433965, 19433142, 19433974, 19433748, 19433264, 19433701, 19433780, 19433227, 19433110, 19433651, 19434083, 19433269, 19433850, 19433885, 19434141, 19433078, 19433451, 19433583, 19433318, 19433587, 19433281, 19433103, 19433881], &#8216;score&#8217;: 150, &#8216;time&#8217;: 1553015734, &#8216;title&#8217;: &#8216;Google unveils Stadia cloud gaming service&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.theverge.com/2019/3/19/18271702/google-stadia-cloud-gaming-service-announcement-gdc-2019&#8217;}, {&#8217;by&#8217;: &#8216;digital55&#8217;, &#8216;descendants&#8217;: 42, &#8216;id&#8217;: 19429724, &#8216;kids&#8217;: [19430641, 19430450, 19431357, 19432696, 19430634, 19430780], &#8216;score&#8217;: 203, &#8216;time&#8217;: 1552993694, &#8216;title&#8217;: &#8216;Karen Uhlenbeck, Uniter of Geometry and Analysis, Wins Abel Prize&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.quantamagazine.org/karen-uhlenbeck-uniter-of-geometry-and-analysis-wins-abel-prize-20190319/&#8217;}, {&#8217;by&#8217;: &#8216;sahin-boydas&#8217;, &#8216;descendants&#8217;: 325, &#8216;id&#8217;: 19430684, &#8216;kids&#8217;: [19433443, 19432485, 19431000, 19433061, 19432319, 19433014, 19432719, 19431167, 19431122, 19433847, 19433323, 19431040, 19432167, 19433241, 19430938, 19430822, 19430794, 19433074, 19431121, 19433048, 19433045, 19432695, 19432886, 19431890, 19432725, 19430803, 19431105, 19431503, 19432680, 19431750, 19432298, 19432809, 19432955, 19432928, 19431146, 19433025, 19433437, 19432832, 19432504, 19432742, 19431111, 19430979, 19432701, 19432490, 19430855], &#8216;score&#8217;: 373, &#8216;time&#8217;: 1553002912, &#8216;title&#8217;: &#8216;Firefox 66.0&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.mozilla.org/en-US/firefox/66.0/releasenotes/&#8217;}, {&#8217;by&#8217;: &#8216;pseudolus&#8217;, &#8216;descendants&#8217;: 69, &#8216;id&#8217;: 19432758, &#8216;kids&#8217;: [19434074, 19434185, 19434172, 19433513, 19433842, 19433488, 19433089, 19433435, 19433873, 19433321, 19433143], &#8216;score&#8217;: 81, &#8216;time&#8217;: 1553014778, &#8216;title&#8217;: &#8216;Patreon ups its revenue cut, but grandfathers in old creators&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://techcrunch.com/2019/03/19/patreon-ups-its-revenue-cut-but-grandfathers-in-old-creators/&#8217;}, {&#8217;by&#8217;: &#8216;pplonski86&#8217;, &#8216;descendants&#8217;: 15, &#8216;id&#8217;: 19429630, &#8216;kids&#8217;: [19430219, 19434118, 19429752, 19433464, 19430329, 19433218, 19430130], &#8216;score&#8217;: 235, &#8216;time&#8217;: 1552992279, &#8216;title&#8217;: &#8216;Vertically Scaling PostgreSQL&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://pgdash.io/blog/scaling-postgres.html&#8217;}, {&#8217;by&#8217;: &#8216;braydo25&#8217;, &#8216;descendants&#8217;: 38, &#8216;id&#8217;: 19432702, &#8216;kids&#8217;: [19433717, 19433570, 19433477, 19433288, 19433420, 19433559, 19433863, 19433731, 19433911, 19434066, 19434120, 19433929, 19433903, 19433578, 19433761, 19433523], &#8216;score&#8217;: 142, &#8216;time&#8217;: 1553014523, &#8216;title&#8217;: &#8220;Google terminated our startup&#8217;s developer account – what do we do?&#8221;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.reddit.com/r/androiddev/comments/b2ztr0/google_terminated_our_startups_developer_account/&#8217;}, {&#8217;by&#8217;: &#8216;smacktoward&#8217;, &#8216;descendants&#8217;: 12, &#8216;id&#8217;: 19432953, &#8216;kids&#8217;: [19434193, 19434086, 19433937, 19433635, 19434032], &#8216;score&#8217;: 15, &#8216;time&#8217;: 1553015725, &#8216;title&#8217;: &#8216;Stepping into the Uncanny, Unsettling World of Shen Yun&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.newyorker.com/culture/culture-desk/stepping-into-the-uncanny-unsettling-world-of-shen-yun&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
