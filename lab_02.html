<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>
  <li id="lab_6_link"><a href="lab_06.html">Client Side Programming</a></li>
  <li id="lab_7_link"><a href="lab_07.html">Node</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19333600, 19334781, 19330812, 19333479, 19331307, 19333239, 19332156, 19333402, 19333277, 19334550, 19328085, 19334683, 19329199, 19330024, 19330719, 19331525, 19329083, 19324670, 19328130, 19329330, 19332376, 19331004, 19328451, 19331783, 19329208, 19327015, 19330955, 19334208, 19330608, 19330632, 19330262, 19325573, 19328019, 19322448, 19324417, 19330356, 19330572, 19329120, 19334543, 19325361, 19331347, 19333068, 19330898, 19327043, 19331725, 19334751, 19330986, 19323032, 19330974, 19333836, 19332665, 19332490, 19321291, 19321775, 19331420, 19329862, 19327264, 19325805, 19325548, 19330351, 19326838, 19334573, 19320217, 19327939, 19327183, 19331068, 19315273, 19325391, 19326637, 19325715, 19324766, 19325331, 19325710, 19328552, 19321070, 19333351, 19323123, 19326631, 19326663, 19322669, 19330476, 19330882, 19327351, 19325570, 19331385, 19328962, 19325436, 19324373, 19320607, 19332987, 19323844, 19325561, 19332721, 19325302, 19318898, 19327612, 19322834, 19321270, 19333563, 19333505, 19319695, 19328635, 19321124, 19320136, 19318341, 19307233, 19308535, 19324971, 19332842, 19321366, 19325074, 19324604, 19322711, 19322998, 19311750, 19319215, 19319489, 19331912, 19321521, 19319233, 19323753, 19329264, 19316737, 19320505, 19315935, 19321218, 19319499, 19330431, 19320117, 19319284, 19321900, 19328637, 19313584, 19311179, 19329679, 19321333, 19333919, 19315191, 19322518, 19315295, 19314646, 19303948, 19328547, 19314681, 19324941, 19316247, 19316319, 19310358, 19318498, 19311970, 19326544, 19310950, 19329018, 19307855, 19316491, 19331277, 19321074, 19321637, 19318464, 19316546, 19311279, 19318685, 19331565, 19319110, 19324586, 19324260, 19316113, 19310638, 19312565, 19321034, 19304802, 19311003, 19310526, 19325556, 19316976, 19322651, 19327146, 19328341, 19316110, 19311578, 19316228, 19320608, 19332285, 19320270, 19316728, 19321217, 19323483, 19313850, 19314999, 19329137, 19312028, 19321963, 19329723, 19321262, 19329572, 19316161, 19330634, 19321609, 19315715, 19313726, 19330382, 19304857, 19311145, 19328016, 19329603, 19307759, 19314076, 19308185, 19313813, 19312332, 19329468, 19321619, 19321330, 19315908, 19308598, 19322729, 19330057, 19330044, 19312154, 19321044, 19311118, 19325293, 19309888, 19316729, 19327168, 19331065, 19307160, 19318649, 19318939, 19311379, 19329533, 19324878, 19329490, 19306309, 19312992, 19308366, 19308219, 19313562, 19322953, 19328350, 19307740, 19315593, 19320553, 19326070, 19308919, 19316209, 19325679, 19306032, 19306666, 19312499, 19324198, 19318523, 19304400, 19330358, 19313794, 19316222, 19310403, 19309927, 19311301, 19315098, 19312318, 19311090, 19319317, 19330142, 19312584, 19309821, 19308430, 19326147, 19312210, 19316119, 19306280, 19322628, 19326973, 19315024, 19322842, 19307009, 19329703, 19313326, 19307787, 19316052, 19303958, 19325811, 19309764, 19325251, 19307341, 19310472, 19322356, 19314690, 19327251, 19309701, 19308250, 19321387, 19327805, 19310845, 19305207, 19327687, 19329600, 19326994, 19309887, 19328828, 19328780, 19307372, 19311738, 19304326, 19307368, 19318707, 19327929, 19325371, 19327340, 19331148, 19310879, 19328382, 19308088, 19319273, 19328274, 19316955, 19329171, 19318379, 19313849, 19312643, 19326555, 19305408, 19304014, 19305018, 19322183, 19312327, 19327079, 19310747, 19324441, 19327943, 19311708, 19311649, 19304200, 19308512, 19309293, 19306491, 19319160, 19314082, 19313071, 19312960, 19314955, 19326622, 19307122, 19305258, 19309121, 19322260, 19314501, 19319935, 19317220, 19319880, 19307243, 19325236, 19326388, 19323159, 19319325, 19324211, 19305228, 19319795, 19327149, 19304655, 19315100, 19323979, 19304158, 19313042, 19316413, 19313698, 19305336, 19310301, 19325119, 19319456, 19305823, 19326662, 19323833, 19304527, 19312457, 19314953, 19317257, 19320293, 19317124, 19324528, 19310730, 19319601, 19319579, 19308982, 19321120, 19320941, 19324531, 19326130, 19313068, 19313064, 19324985, 19306132, 19322887, 19314243, 19319246, 19306737, 19324582, 19308873, 19316236, 19319603, 19315467, 19322035, 19325547, 19322707, 19315122, 19318281, 19304178, 19323885, 19328729, 19321388, 19314688, 19314489, 19321059, 19307745, 19325300, 19315953, 19304486, 19323084, 19312822, 19312352, 19322342, 19317263, 19314860, 19307523, 19314227, 19324490, 19312404, 19310022, 19308524, 19323916, 19311856, 19316509, 19307533, 19316744, 19323316, 19314327, 19323122, 19303666, 19319349, 19310337, 19317209, 19311326, 19317171, 19322168, 19318492, 19313923, 19314522, 19312209, 19312047, 19311703, 19310979, 19308625, 19320549, 19314790, 19312311, 19320284, 19320228, 19309069, 19311814, 19305131, 19319797, 19319788, 19314006, 19316291, 19313552, 19313367, 19313533, 19315542, 19309362, 19319173, 19319157, 19316605, 19318694, 19318561, 19324782, 19314711, 19318460, 19307212, 19313918, 19313821, 19317984, 19332844, 19315976, 19308788, 19305860, 19315748, 19315479, 19311923, 19315325, 19312183, 19311778, 19310385, 19322032, 19313902, 19316555, 19305950, 19310235, 19312633, 19307392, 19306878]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19333600, 19334781, 19330812, 19333479, 19331307, 19333239, 19332156, 19333402, 19333277, 19334550]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;tlrobinson&#8217;, &#8216;descendants&#8217;: 96, &#8216;id&#8217;: 19333600, &#8216;kids&#8217;: [19333938, 19333829, 19334842, 19333766, 19334591, 19334832, 19333818, 19333975, 19334158, 19333779, 19334028, 19333993, 19333813, 19333842, 19333821, 19333943, 19334636, 19333999, 19333998, 19334438, 19333764, 19334097, 19333981, 19333823], &#8216;score&#8217;: 201, &#8216;time&#8217;: 1552000363, &#8216;title&#8217;: &#8216;800M Email Addresses Leaked Online by Email Verification Service&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://securitydiscovery.com/800-million-emails-leaked-online-by-email-verification-service/&#8217;}, {&#8217;by&#8217;: &#8216;mathattack&#8217;, &#8216;descendants&#8217;: 0, &#8216;id&#8217;: 19334781, &#8216;score&#8217;: 8, &#8216;time&#8217;: 1552014520, &#8216;title&#8217;: &#8216;The sharing economy was always a scam&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://onezero.medium.com/the-sharing-economy-was-always-a-scam-68a9b36f3e4b&#8217;}, {&#8217;by&#8217;: &#8216;c_t_montgomery&#8217;, &#8216;descendants&#8217;: 297, &#8216;id&#8217;: 19330812, &#8216;kids&#8217;: [19331981, 19331574, 19332971, 19331257, 19331322, 19331927, 19331520, 19332787, 19331994, 19331317, 19332823, 19331656, 19331990, 19331670, 19334221, 19334184, 19333696, 19331393, 19333692, 19333393, 19331328, 19331383, 19331396, 19331499, 19332507, 19332764], &#8216;score&#8217;: 339, &#8216;time&#8217;: 1551984184, &#8216;title&#8217;: &#8216;Airbnb to Acquire HotelTonight&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://press.airbnb.com/airbnb-signs-agreement-to-acquire-hoteltonight/&#8217;}, {&#8217;by&#8217;: &#8216;andrenth&#8217;, &#8216;descendants&#8217;: 42, &#8216;id&#8217;: 19333479, &#8216;kids&#8217;: [19334296, 19334189, 19334064, 19334315, 19334471, 19334372, 19333891, 19334063, 19334821, 19334875, 19334558], &#8216;score&#8217;: 80, &#8216;time&#8217;: 1551999448, &#8216;title&#8217;: &#8216;How to earn your macroeconomics and finance white belt as a software developer&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://notamonadtutorial.com/how-to-earn-your-macroeconomics-and-finance-white-belt-as-a-software-developer-136e7454866f&#8217;}, {&#8217;by&#8217;: &#8216;devilcius&#8217;, &#8216;descendants&#8217;: 103, &#8216;id&#8217;: 19331307, &#8216;kids&#8217;: [19332434, 19333432, 19332346, 19332599, 19334736, 19332648, 19332041, 19332297, 19332154, 19332260, 19333212, 19334500, 19334387, 19334145, 19334600, 19334568, 19332050, 19332519, 19333850, 19332877, 19334168, 19332168, 19332435, 19333350, 19333693, 19333388, 19333761, 19332045, 19333414, 19333743, 19332298, 19332704, 19332015, 19332025, 19332776], &#8216;score&#8217;: 207, &#8216;time&#8217;: 1551986942, &#8216;title&#8217;: &#8220;What&#8217;s the minimum number of words you&#8217;d need to define all other words? (2012)&#8221;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.reddit.com/r/AskReddit/comments/sxqt5/what_is_the_minimum_number_of_words_that_you/&#8217;}, {&#8217;by&#8217;: &#8216;abhisuri97&#8217;, &#8216;descendants&#8217;: 92, &#8216;id&#8217;: 19333239, &#8216;kids&#8217;: [19334105, 19334887, 19334390, 19334099, 19334344, 19334791, 19334265, 19334398, 19334083, 19334119, 19334100, 19333967, 19334283, 19334087, 19334163, 19334210, 19334076, 19334297], &#8216;score&#8217;: 79, &#8216;time&#8217;: 1551997880, &#8216;title&#8217;: &#8216;Uber Not Criminally Liable in Death of Woman Hit by Self-Driving Car&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.npr.org/2019/03/06/700801945/uber-not-criminally-liable-in-death-of-woman-hit-by-self-driving-car-says-prosec&#8217;}, {&#8217;by&#8217;: &#8216;mgartner&#8217;, &#8216;descendants&#8217;: 48, &#8216;id&#8217;: 19332156, &#8216;kids&#8217;: [19332930, 19332785, 19333130, 19332928, 19333265, 19333776, 19332970, 19334286, 19333956, 19333639, 19332957, 19332722, 19333719, 19333196, 19333033], &#8216;score&#8217;: 110, &#8216;time&#8217;: 1551991404, &#8216;title&#8217;: &#8216;Stop Wasting Connections, Use <span class="caps">HTTP</span> Keep-Alive&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://lob.com/blog/use-http-keep-alive&#8217;}, {&#8217;by&#8217;: &#8216;mnem&#8217;, &#8216;descendants&#8217;: 7, &#8216;id&#8217;: 19333402, &#8216;kids&#8217;: [19333924, 19333866, 19334497], &#8216;score&#8217;: 49, &#8216;time&#8217;: 1551998910, &#8216;title&#8217;: &#8216;A framework for creating Python/C++ polyglots&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://github.com/wmww/Python-plus-plus&#8217;}, {&#8217;by&#8217;: &#8216;bookofjoe&#8217;, &#8216;descendants&#8217;: 13, &#8216;id&#8217;: 19333277, &#8216;kids&#8217;: [19333791, 19334576, 19334243, 19333631, 19333632, 19334486, 19334025, 19334247, 19333807, 19333714, 19334235, 19333959], &#8216;score&#8217;: 44, &#8216;time&#8217;: 1551998101, &#8216;title&#8217;: &#8216;Why do old books smell? [video]&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.bookofjoe.com/2019/03/why-do-old-books-smell.html&#8217;}, {&#8217;by&#8217;: &#8216;bwidlar&#8217;, &#8216;descendants&#8217;: 0, &#8216;id&#8217;: 19334550, &#8216;score&#8217;: 8, &#8216;time&#8217;: 1552010988, &#8216;title&#8217;: &#8216;Writing a Simple Password Generator in Racket&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://alex-hhh.github.io/2019/03/password-generator.html&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
