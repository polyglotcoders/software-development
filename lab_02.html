<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19031055, 19030099, 19032083, 19029573, 19031237, 19028860, 19031988, 19029206, 19030307, 19027254, 19029801, 19030607, 19029048, 19031135, 19028899, 19027972, 19016010, 19027400, 19028855, 19031612, 19021644, 19030617, 19025639, 19029791, 19016469, 19031297, 19025968, 19015964, 19028483, 19026872, 19017079, 19029501, 19025560, 19031711, 19016997, 19028449, 19016930, 19014247, 19029145, 19020089, 19031727, 19028476, 19027817, 19027888, 19016612, 19026621, 19028658, 19029703, 19032103, 19024075, 19026335, 19029101, 19026396, 19028346, 19025502, 19029985, 19026044, 19030870, 19030194, 19019017, 19022353, 19016990, 19026014, 19023413, 19023734, 19024872, 19027852, 19025871, 19029877, 19030622, 19030418, 19031629, 19025885, 19022000, 19016362, 19031263, 19023159, 19028764, 19016945, 19030857, 19025000, 19021028, 19028081, 19029172, 19022384, 19029165, 19016806, 19022177, 19030541, 19027801, 19019048, 19031299, 19017108, 19026102, 19029548, 19012872, 19017219, 19029311, 19015603, 19017066, 19030329, 19017495, 19029246, 19028954, 19028130, 19023232, 19025499, 19014143, 19030471, 19020787, 19018284, 19023196, 19023103, 19025724, 19025305, 19012237, 19021719, 19018185, 19029759, 19021371, 19016353, 19016428, 19017786, 19022690, 19020601, 19023319, 19029594, 19018240, 19016466, 19025988, 19027903, 19029592, 19024575, 19013189, 19022715, 19018037, 19025987, 19025709, 19017173, 19017492, 19021350, 19021658, 19030425, 19017511, 19017489, 19016324, 19019376, 19020637, 19022514, 19017138, 19020027, 19019542, 19021006, 19012705, 19019336, 19016869, 19016072, 19015079, 19015799, 19028201, 19016861, 19021454, 19014665, 19012369, 19020070, 19020257, 19008470, 19017083, 19017938, 19018914, 19013480, 19016569, 19018536, 19016316, 19025536, 19029699, 19015504, 19029041, 19029673, 19028309, 19029622, 19028965, 19019157, 19016064, 19021574, 19029538, 19019943, 19029281, 19016100, 19015358, 19023998, 19009206, 19016399, 19020076, 19016047, 19009431, 19021396, 19015093, 19013069, 19019964, 19011650, 19014962, 19029210, 19018399, 19011925, 19016596, 19010544, 19017009, 19017007, 19014828, 19017270, 19025238, 19013993, 19017111, 19020607, 19011880, 19015087, 19011980, 19020748, 19024399, 19028850, 19013980, 19027737, 19008109, 19008224, 19028746, 19013445, 19012573, 19009756, 19019545, 19012087, 19024101, 19024095, 19015027, 19026746, 19011514, 19011356, 19012132, 19012314, 19015070, 19023142, 19007221, 19014271, 19014278, 19016049, 19028006, 19015501, 19027952, 19013987, 19012403, 19012048, 19027726, 19014251, 19014820, 19014618, 19010196, 19012936, 19019896, 19021399, 19023002, 19023921, 19020352, 19017772, 19025441, 19010492, 19008951, 19011497, 19027111, 19020091, 19025488, 19024739, 19024398, 19019574, 19013103, 19007105, 19011998, 19011890, 19018464, 19007710, 19011275, 19015601, 19020887, 19011317, 19027535, 19017532, 19011554, 19020810, 19012443, 19023258, 19008792, 19023663, 19010671, 19008241, 19025239, 19022488, 19010600, 19016991, 19022438, 19020203, 19007117, 19020163, 19023962, 19020019, 19016125, 19013667, 19021085, 19011902, 19009121, 19023174, 19019070, 19023436, 19024061, 19013852, 19008990, 19012805, 19014006, 19013846, 19010166, 19025249, 19010407, 19017616, 19010272, 19011265, 19020222, 19010164, 19012709, 19020075, 19024021, 19017466, 19016345, 19009190, 19007493, 19011328, 19012339, 19023081, 19014693, 19011875, 19007078, 19011436, 19010919, 19021066, 19018233, 19008375, 19024419, 19011635, 19009684, 19024358, 19021632, 19015300, 19015699, 19013612, 19021345, 19025957, 19022803, 19006919, 19009229, 19006797, 19007637, 19007243, 19015353, 19010420, 19021327, 19016454, 19021228, 19008032, 19014575, 19020317, 19010993, 19010561, 19014796, 19021720, 19007302, 19021274, 19007536, 19012265, 19023210, 19013374, 19022969, 19010747, 19007696, 19020375, 19017906, 19020347, 19007566, 19012239, 19014708, 19016415, 19020014, 19006661, 19014040, 19015943, 19014571, 19009160, 19015153, 19008447, 19011537, 19011016, 19007727, 19010179, 19007365, 19006932, 19020879, 19016388, 19006939, 19014936, 19019095, 19028215, 19012731, 19009124, 19009800, 19018315, 19007459, 19015279, 19021555, 19013746, 19013466, 19017836, 19007066, 19010284, 19014807, 19015396, 19017119, 19018113, 19011993, 19021271, 19010309, 19007450, 19012091, 19009830, 19013617, 19013613, 19019748, 19012586, 19011733, 19013873, 19006753, 19009693, 19010753, 19014809, 19006692, 19014696, 19014690, 19010499, 19014497, 19014430, 19006926, 19007805, 19009878, 19009570, 19014373, 19007525, 19012141, 19011433, 19011614, 19009607, 19008684, 19010629, 19007719, 19007358, 19009824, 19010568, 19016332, 19010457, 19018153, 19008883, 19007107, 19007030, 19007013, 19019965, 19013819, 19010597, 19012060, 19014770, 19012584, 19011777, 19031429, 19025912, 19014433, 19015612, 19007427, 19016882, 19028709]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19031055, 19030099, 19032083, 19029573, 19031237, 19028860, 19031988, 19029206, 19030307, 19027254]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;randomacct3847&#8217;, &#8216;descendants&#8217;: 167, &#8216;id&#8217;: 19031055, &#8216;kids&#8217;: [19031218, 19031543, 19031389, 19031602, 19031130, 19032197, 19031169, 19031157, 19031493, 19032192, 19031158, 19031250, 19031142, 19031739, 19031374, 19031192, 19031328, 19032159, 19031301, 19032166, 19031205, 19031435, 19031574, 19031747, 19032060, 19031464, 19031708, 19031569, 19031965, 19031267, 19031485, 19031937, 19031590, 19031610, 19031306, 19031175, 19031465], &#8216;score&#8217;: 527, &#8216;time&#8217;: 1548805176, &#8216;title&#8217;: &#8216;Facebook has been paying people to install a “Research” <span class="caps">VPN</span>&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://techcrunch.com/2019/01/29/facebook-project-atlas/&#8217;}, {&#8217;by&#8217;: &#8216;Jedd&#8217;, &#8216;descendants&#8217;: 90, &#8216;id&#8217;: 19030099, &#8216;kids&#8217;: [19030764, 19032211, 19030588, 19030446, 19030186, 19030327, 19031979, 19031986, 19030746, 19031840, 19031057, 19031161, 19030946, 19030850, 19031032, 19031060, 19031021, 19031398, 19031105], &#8216;score&#8217;: 193, &#8216;time&#8217;: 1548798481, &#8216;title&#8217;: &#8216;Office 365 global authentication outage&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://status.office365.com/&#8217;}, {&#8217;by&#8217;: &#8216;travisgriggs&#8217;, &#8216;descendants&#8217;: 0, &#8216;id&#8217;: 19032083, &#8216;score&#8217;: 10, &#8216;time&#8217;: 1548815310, &#8216;title&#8217;: &#8216;How I ended up writing a new real-time kernel&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://dmitryfrank.com/articles/how_i_ended_up_writing_my_own_kernel&#8217;}, {&#8217;by&#8217;: &#8216;josu&#8217;, &#8216;descendants&#8217;: 2, &#8216;id&#8217;: 19029573, &#8216;kids&#8217;: <sup class="footnote" id="fnr19031865"><a href="#fn19031865">19031865</a></sup>, &#8216;score&#8217;: 39, &#8216;time&#8217;: 1548794093, &#8216;title&#8217;: &#8216;Apple was warned about the FaceTime eavesdropping bug last week&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.theverge.com/2019/1/29/18202398/apple-facetime-bug-warned-eavesdropping&#8217;}, {&#8217;by&#8217;: &#8216;glassworm&#8217;, &#8216;descendants&#8217;: 28, &#8216;id&#8217;: 19031237, &#8216;kids&#8217;: [19031589, 19032043, 19032091, 19031969, 19032190, 19032088, 19031838, 19032116, 19032025, 19032039, 19031527, 19032081, 19032019, 19032049, 19032014, 19032037, 19032147, 19031822], &#8216;score&#8217;: 59, &#8216;time&#8217;: 1548806813, &#8216;title&#8217;: &#8216;Google Takes Its First Steps Toward Killing the <span class="caps">URL</span>&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.wired.com/story/google-chrome-kill-url-first-steps/&#8217;}, {&#8217;by&#8217;: &#8216;manojlds&#8217;, &#8216;descendants&#8217;: 78, &#8216;id&#8217;: 19028860, &#8216;kids&#8217;: [19029490, 19029489, 19029643, 19029445, 19029379, 19031675, 19031736, 19030518, 19031649, 19031801, 19029738, 19029400, 19030377, 19029554, 19030661, 19030997, 19030218, 19030118, 19029616, 19030108, 19030309, 19029324, 19029542, 19029750], &#8216;score&#8217;: 257, &#8216;time&#8217;: 1548787747, &#8216;title&#8217;: &#8216;AresDB: Uber’s <span class="caps">GPU</span>-Powered Open-Source, Real-Time Analytics Engine&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://eng.uber.com/aresdb/&#8217;}, {&#8217;by&#8217;: &#8216;drewvolpe&#8217;, &#8216;descendants&#8217;: 2, &#8216;id&#8217;: 19031988, &#8216;kids&#8217;: <sup class="footnote" id="fnr19032143"><a href="#fn19032143">19032143</a></sup>, &#8216;score&#8217;: 15, &#8216;time&#8217;: 1548814296, &#8216;title&#8217;: &#8216;Remembering Roger Boisjoly: He Tried to Stop Shuttle Challenger Launch&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.npr.org/sections/thetwo-way/2012/02/06/146490064/remembering-roger-boisjoly-he-tried-to-stop-shuttle-challenger-launch&#8217;}, {&#8217;by&#8217;: &#8216;ingve&#8217;, &#8216;descendants&#8217;: 63, &#8216;id&#8217;: 19029206, &#8216;kids&#8217;: [19029797, 19029755, 19029526, 19029350, 19029816, 19031686, 19029713, 19029524, 19030143, 19029617, 19031722, 19030400, 19029588, 19029439, 19030375], &#8216;score&#8217;: 198, &#8216;time&#8217;: 1548790805, &#8216;title&#8217;: &#8216;Advice to new programmers&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://olafurw.com/2019-01-27-programmer-advice/&#8217;}, {&#8217;by&#8217;: &#8216;colinprince&#8217;, &#8216;descendants&#8217;: 24, &#8216;id&#8217;: 19030307, &#8216;kids&#8217;: [19031742, 19032135, 19032160, 19030956, 19031268, 19032097, 19031713, 19032124, 19030786, 19031054, 19031224], &#8216;score&#8217;: 78, &#8216;time&#8217;: 1548799745, &#8216;title&#8217;: &#8216;The heroes of the Thai cave rescue&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.macleans.ca/thai-cave-rescue-heroes/&#8217;}, {&#8217;by&#8217;: &#8216;huihuiilly&#8217;, &#8216;descendants&#8217;: 77, &#8216;id&#8217;: 19027254, &#8216;kids&#8217;: [19028009, 19028958, 19027614, 19032136, 19027682, 19028425, 19028824, 19027517, 19028102, 19031522, 19031478, 19027655, 19030225, 19029846, 19030766, 19029002, 19028165, 19028072, 19028771, 19027572], &#8216;score&#8217;: 310, &#8216;time&#8217;: 1548776945, &#8216;title&#8217;: &#8216;The Man Who Invented Information Theory (2017)&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://bostonreview.net/science-nature/tom-rutledge-man-who-invented-information-theory&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
