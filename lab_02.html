<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19122727, 19123352, 19123465, 19122616, 19116664, 19113147, 19122797, 19122617, 19117141, 19120646, 19123178, 19121947, 19115964, 19122849, 19122136, 19122731, 19121882, 19121331, 19120832, 19121981, 19122211, 19116821, 19122521, 19122112, 19121828, 19123157, 19114805, 19123443, 19117839, 19122626, 19122979, 19122570, 19113837, 19121716, 19115559, 19122228, 19122028, 19118642, 19122070, 19113661, 19121740, 19123111, 19118951, 19121893, 19121949, 19121973, 19119868, 19122604, 19113569, 19113416, 19113960, 19113119, 19122920, 19120469, 19121505, 19120729, 19120208, 19116020, 19110698, 19113123, 19113514, 19119578, 19121503, 19121250, 19120277, 19117535, 19121443, 19120216, 19115686, 19109474, 19115024, 19111816, 19113139, 19117943, 19118326, 19120042, 19113443, 19120048, 19113658, 19113167, 19116873, 19106922, 19105733, 19121094, 19110041, 19113854, 19106475, 19108787, 19106771, 19113635, 19116915, 19109027, 19106658, 19112637, 19108017, 19113591, 19114169, 19113363, 19111594, 19113476, 19118916, 19105426, 19104680, 19115839, 19106767, 19109371, 19121961, 19111358, 19114834, 19104880, 19111707, 19121993, 19106796, 19119218, 19119532, 19104331, 19113628, 19102637, 19108206, 19112090, 19111170, 19113759, 19105749, 19101209, 19119991, 19103557, 19120334, 19104044, 19107773, 19114037, 19113819, 19112186, 19104853, 19106772, 19100365, 19107805, 19104065, 19109220, 19104438, 19114421, 19109455, 19115460, 19111749, 19118186, 19118740, 19106111, 19114499, 19106524, 19109101, 19118979, 19118887, 19104167, 19108854, 19107831, 19103448, 19101363, 19109246, 19105663, 19106930, 19116064, 19104980, 19104959, 19106782, 19118358, 19105309, 19119284, 19106316, 19109692, 19104122, 19110215, 19108115, 19100366, 19108911, 19108781, 19104650, 19100257, 19104112, 19106632, 19100955, 19118668, 19109092, 19104734, 19115981, 19113129, 19101194, 19120782, 19101648, 19109213, 19107518, 19119826, 19111250, 19109276, 19111511, 19107826, 19114240, 19121514, 19112932, 19119503, 19113918, 19113807, 19111235, 19105905, 19113836, 19106998, 19118125, 19117847, 19115455, 19120835, 19111497, 19116138, 19100129, 19109416, 19107940, 19121385, 19101020, 19104211, 19111037, 19108604, 19120791, 19119875, 19099887, 19112387, 19120506, 19105086, 19107251, 19118685, 19103961, 19118569, 19101156, 19117815, 19119626, 19106507, 19106209, 19114881, 19107814, 19100986, 19120195, 19117634, 19108241, 19120608, 19107876, 19100050, 19117162, 19117121, 19099741, 19118635, 19111528, 19106708, 19116480, 19106399, 19115258, 19104562, 19110083, 19101309, 19099538, 19106863, 19100828, 19104098, 19109673, 19107374, 19105278, 19121333, 19108697, 19105479, 19108823, 19111952, 19119226, 19104581, 19108239, 19108353, 19119501, 19119008, 19116431, 19118796, 19099879, 19101846, 19111399, 19099474, 19106894, 19106412, 19114096, 19106484, 19106451, 19112057, 19105908, 19101726, 19107960, 19110086, 19107821, 19112757, 19108678, 19113955, 19105596, 19110202, 19108599, 19113313, 19108293, 19107692, 19107778, 19115549, 19105088, 19109241, 19110019, 19112926, 19100718, 19108368, 19114658, 19106541, 19112524, 19108034, 19120062, 19102036, 19113993, 19113882, 19106721, 19111868, 19100727, 19108452, 19110419, 19113188, 19107128, 19111451, 19105125, 19111325, 19111315, 19100681, 19108652, 19109200, 19110479, 19112317, 19101996, 19107385, 19101890, 19107163, 19106980, 19106578, 19105306, 19107437, 19100372, 19100205, 19099976, 19101813, 19101369, 19101355, 19100808, 19100665, 19100642, 19107873, 19103518, 19107564, 19107398, 19110887, 19113902, 19110955, 19099398, 19102399, 19099923, 19103522, 19114863, 19109080, 19100950, 19100576, 19102977, 19099844, 19104298, 19107673, 19102081, 19106850, 19099384, 19108230, 19104524, 19101529, 19119342, 19103203, 19105057, 19103089, 19102436, 19100907, 19100220, 19100089, 19100749, 19107608, 19121968, 19107302, 19103858, 19106533, 19110002, 19104965, 19122079, 19110914, 19119732, 19115362, 19112152, 19105272, 19114734, 19108757, 19117967]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19122727, 19123352, 19123465, 19122616, 19116664, 19113147, 19122797, 19122617, 19117141, 19120646]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;dieulot&#8217;, &#8216;descendants&#8217;: 81, &#8216;id&#8217;: 19122727, &#8216;kids&#8217;: [19123447, 19123281, 19123618, 19123048, 19123552, 19122975, 19123145, 19122923, 19122927, 19122947, 19123042, 19122982, 19122903, 19123027, 19122955, 19122957, 19123393, 19123321, 19123247], &#8216;score&#8217;: 224, &#8216;time&#8217;: 1549726200, &#8216;title&#8217;: &#8216;Show HN: Make your siteâ€™s pages instant in 1 minute&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://instant.page/&#8217;}, {&#8217;by&#8217;: &#8216;matt_d&#8217;, &#8216;descendants&#8217;: 1, &#8216;id&#8217;: 19123352, &#8216;kids&#8217;: <sup class="footnote" id="fnr19123610"><a href="#fn19123610">19123610</a></sup>, &#8216;score&#8217;: 15, &#8216;time&#8217;: 1549731977, &#8216;title&#8217;: &#8216;Top-down performance analysis methodology&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://dendibakh.github.io/blog/2019/02/09/Top-Down-performance-analysis-methodology&#8217;}, {&#8217;by&#8217;: &#8216;rpcastagna&#8217;, &#8216;descendants&#8217;: 0, &#8216;id&#8217;: 19123465, &#8216;score&#8217;: 7, &#8216;time&#8217;: 1549733274, &#8216;title&#8217;: &#8220;Google doesn&#8217;t hire losers&#8221;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://rpcrpcrpc.com/posts/2019/02/09/googlers-no-losers/&#8217;}, {&#8217;by&#8217;: &#8216;paulpauper&#8217;, &#8216;descendants&#8217;: 24, &#8216;id&#8217;: 19122616, &#8216;kids&#8217;: [19123095, 19122876, 19122831, 19123081], &#8216;score&#8217;: 48, &#8216;time&#8217;: 1549724780, &#8216;title&#8217;: &#8216;As German Bund Yields Head to Zero, They Still Beat U.S. Treasuries&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.bloomberg.com/opinion/articles/2019-02-08/as-german-bund-yields-head-to-zero-they-still-beat-treasuries&#8217;}, {&#8217;by&#8217;: &#8216;smacktoward&#8217;, &#8216;descendants&#8217;: 1, &#8216;id&#8217;: 19116664, &#8216;kids&#8217;: <sup class="footnote" id="fnr19123331"><a href="#fn19123331">19123331</a></sup>, &#8216;score&#8217;: 22, &#8216;time&#8217;: 1549647535, &#8216;title&#8217;: &#8216;The Peculiar Power of Plane Mechanic Simulator&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.rockpapershotgun.com/2019/02/08/the-flare-path-plane-mechanic-simulator-review/&#8217;}, {&#8217;by&#8217;: &#8216;mpweiher&#8217;, &#8216;descendants&#8217;: 33, &#8216;id&#8217;: 19113147, &#8216;kids&#8217;: [19122059, 19122140, 19123507, 19122045, 19122378, 19122119, 19122073, 19123344, 19122770, 19122117, 19122274, 19122043, 19113662], &#8216;score&#8217;: 164, &#8216;time&#8217;: 1549624083, &#8216;title&#8217;: &#8216;I scanned Austria&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://blog.haschek.at/2019/i-scanned-austria.html&#8217;}, {&#8217;by&#8217;: &#8216;howard941&#8217;, &#8216;descendants&#8217;: 6, &#8216;id&#8217;: 19122797, &#8216;kids&#8217;: [19123632, 19123462, 19123511, 19123493], &#8216;score&#8217;: 20, &#8216;time&#8217;: 1549726987, &#8216;title&#8217;: &#8216;Attacking a Pay Wall That Hides Public Court Filings&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.nytimes.com/2019/02/04/us/politics/pacer-fees-lawsuit.html&#8217;}, {&#8217;by&#8217;: &#8216;readabledotred&#8217;, &#8216;descendants&#8217;: 12, &#8216;id&#8217;: 19122617, &#8216;kids&#8217;: [19123398, 19122862, 19122912, 19123420], &#8216;score&#8217;: 29, &#8216;time&#8217;: 1549724789, &#8216;title&#8217;: &#8216;Getting started with Readable Human Format&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://readable.red/getting-started&#8217;}, {&#8217;by&#8217;: &#8216;auferstehung&#8217;, &#8216;descendants&#8217;: 5, &#8216;id&#8217;: 19117141, &#8216;kids&#8217;: [19123383, 19123333], &#8216;score&#8217;: 34, &#8216;time&#8217;: 1549650273, &#8216;title&#8217;: &#8216;How Craig Barton wishes heâ€™d taught maths&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://gowers.wordpress.com/2018/12/22/how-craig-barton-wishes-hed-taught-maths/#more-6435&#8217;}, {&#8217;by&#8217;: &#8216;nabla9&#8217;, &#8216;descendants&#8217;: 107, &#8216;id&#8217;: 19120646, &#8216;kids&#8217;: [19122699, 19122384, 19121575, 19121560, 19121513, 19121984, 19123076, 19121134, 19123416, 19121974, 19121215, 19121312, 19121179, 19122385, 19121939, 19121200, 19122586, 19121151], &#8216;score&#8217;: 267, &#8216;time&#8217;: 1549685069, &#8216;title&#8217;: &#8216;We need to talk about systematic fraud&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.nature.com/articles/d41586-019-00439-9&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
