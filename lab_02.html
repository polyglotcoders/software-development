<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19124324, 19118891, 19124635, 19122727, 19124698, 19123506, 19124480, 19122797, 19123207, 19123153, 19124109, 19122973, 19123352, 19116664, 19124608, 19124953, 19123811, 19122621, 19122070, 19113147, 19123011, 19123430, 19120036, 19117141, 19113918, 19114805, 19124785, 19123178, 19121947, 19115964, 19122849, 19122617, 19122997, 19122136, 19122211, 19124075, 19122616, 19122228, 19120646, 19123272, 19121828, 19121981, 19122521, 19117839, 19125303, 19124071, 19121882, 19123338, 19122112, 19113661, 19120832, 19122731, 19118642, 19121331, 19122127, 19122626, 19123306, 19116821, 19122133, 19118951, 19123047, 19123071, 19123157, 19121716, 19122979, 19122815, 19124956, 19123265, 19122515, 19124815, 19122028, 19121893, 19113416, 19113960, 19119868, 19113119, 19123771, 19113569, 19113837, 19110698, 19116020, 19120469, 19123458, 19115559, 19120208, 19122207, 19119578, 19122115, 19109474, 19113123, 19120729, 19117535, 19111816, 19115686, 19121973, 19120277, 19121505, 19115024, 19106922, 19105733, 19113139, 19117943, 19120216, 19113443, 19110041, 19123611, 19118326, 19121250, 19113658, 19123587, 19123208, 19113167, 19122570, 19106475, 19106771, 19108787, 19113854, 19116873, 19120042, 19121503, 19122089, 19106658, 19122604, 19123111, 19109027, 19113635, 19121949, 19108017, 19120048, 19121443, 19111594, 19116915, 19112637, 19105426, 19113591, 19106767, 19114169, 19121094, 19113514, 19119532, 19113363, 19109371, 19104880, 19122878, 19104680, 19111358, 19113476, 19118916, 19115839, 19104331, 19106796, 19111707, 19102637, 19114834, 19108206, 19113628, 19123141, 19112090, 19119991, 19105749, 19101209, 19103557, 19104044, 19111170, 19122920, 19119218, 19100365, 19104853, 19113759, 19106772, 19104065, 19104438, 19107805, 19107773, 19122713, 19112186, 19114037, 19109220, 19113819, 19109455, 19106111, 19121961, 19106524, 19114421, 19101363, 19109101, 19103448, 19104167, 19118740, 19107831, 19120334, 19105663, 19104980, 19104959, 19108854, 19115460, 19106930, 19111749, 19118186, 19114499, 19106782, 19109246, 19105309, 19122202, 19104122, 19106316, 19123443, 19109692, 19100366, 19122084, 19122052, 19110215, 19108115, 19100257, 19118979, 19118887, 19104650, 19100955, 19104112, 19108911, 19116064, 19108781, 19106632, 19118358, 19104734, 19109276, 19109092, 19101648, 19119284, 19101194, 19109213, 19107518, 19113129, 19112932, 19111250, 19115981, 19107826, 19118668, 19111511, 19119826, 19105905, 19106998, 19111235, 19114240, 19100129, 19113807, 19101020, 19113836, 19109416, 19104211, 19107940, 19111497, 19099887, 19120782, 19119503, 19108604, 19111037, 19115455, 19118125, 19101156, 19105086, 19117847, 19103961, 19116138, 19107251, 19121993, 19112387, 19106507, 19100986, 19106209, 19107814, 19100050, 19121514, 19099741, 19108241, 19107876, 19120835, 19121385, 19118685, 19119875, 19114881, 19117815, 19118569, 19106708, 19104562, 19101309, 19099538, 19106399, 19119626, 19111528, 19100828, 19114790, 19120791, 19120506, 19117634, 19104098, 19106863, 19110083, 19105278, 19117162, 19117121, 19107374, 19109673, 19105479, 19108697, 19116480, 19115258, 19104581, 19118635, 19120195, 19108823, 19112057, 19099879, 19108239, 19108353, 19099474, 19101846, 19111952, 19120608, 19106894, 19106412, 19101726, 19106484, 19111399, 19106451, 19105908, 19116431, 19107960, 19119226, 19107821, 19110086, 19114096, 19119008, 19108678, 19119501, 19118796, 19105596, 19114658, 19112757, 19110202, 19108599, 19113955, 19100718, 19108293, 19107692, 19105088, 19107778, 19109241, 19121333, 19110019, 19113313, 19106541, 19102036, 19108368, 19108034, 19112926, 19115549, 19100727, 19112524, 19106721, 19108452, 19110419, 19111868, 19113993, 19113882, 19105125, 19100681, 19107128, 19101369, 19111451, 19111325, 19111315, 19108652, 19113188, 19101996, 19101890, 19120062, 19109200, 19107385, 19110479, 19107163, 19106980, 19100372, 19100205, 19099976, 19106578, 19105306, 19101813, 19112317, 19107437, 19101355, 19100808, 19100665, 19100642, 19103518, 19107873, 19107564, 19107398, 19099398, 19110887, 19099923, 19102399, 19103522, 19110955, 19100950, 19100576, 19113902, 19102977, 19099844, 19109080, 19104298, 19102081, 19107673, 19106850, 19114863, 19099384, 19101529, 19108230, 19104524, 19103203, 19103089, 19105057, 19102436, 19119342, 19100907, 19100220, 19100089, 19100749, 19107608, 19107302, 19103858, 19106533, 19121968, 19110002, 19104965, 19110914, 19122079, 19119732, 19115362, 19105272, 19112152, 19114734, 19108757, 19117967]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19124324, 19118891, 19124635, 19122727, 19124698, 19123506, 19124480, 19122797, 19123207, 19123153]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;jacquesm&#8217;, &#8216;descendants&#8217;: 270, &#8216;id&#8217;: 19124324, &#8216;kids&#8217;: [19124481, 19124652, 19124554, 19124463, 19124559, 19125454, 19124877, 19124806, 19125127, 19124412, 19124468, 19125519, 19125331, 19125503, 19124448, 19124601, 19125246, 19124508, 19125260, 19125453, 19125312, 19125244, 19124400, 19124401, 19125238, 19124493, 19124587, 19125295, 19124443, 19125265, 19124644, 19124748, 19125460, 19124672, 19125080, 19125271, 19124596, 19124462, 19124747, 19124389, 19125181, 19125270, 19124498, 19125374, 19124668, 19125273, 19124577, 19124592, 19124917, 19124485, 19125075, 19125407, 19124794, 19124968, 19125346, 19124800, 19124991, 19124491, 19125204, 19125090, 19124416, 19124719, 19124725, 19124409, 19124510, 19124588, 19124451, 19124883, 19124472, 19124752, 19124573, 19124514], &#8216;score&#8217;: 709, &#8216;time&#8217;: 1549743253, &#8216;title&#8217;: &#8216;Google terminated our business via our Google Play Developer Account&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://blog.usejournal.com/google-wrongly-terminated-our-new-business-via-our-google-play-developer-account-5f5b7b742542?gi=78a7126ab7f8&#8217;}, {&#8217;by&#8217;: &#8216;new_guy&#8217;, &#8216;descendants&#8217;: 11, &#8216;id&#8217;: 19118891, &#8216;kids&#8217;: [19125254, 19125285, 19125313, 19125261], &#8216;score&#8217;: 84, &#8216;time&#8217;: 1549661474, &#8216;title&#8217;: &#8216;Mexican scientist cures human papilloma virus&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.eluniversal.com.mx/english/mexican-scientist-cures-human-papilloma-virus&#8217;}, {&#8217;by&#8217;: &#8216;badrabbit&#8217;, &#8216;descendants&#8217;: 73, &#8216;id&#8217;: 19124635, &#8216;kids&#8217;: [19125245, 19125115, 19125022, 19125483, 19124929, 19125140, 19125039, 19125003, 19125296, 19124833, 19125307, 19125153, 19125009, 19124965], &#8216;score&#8217;: 129, &#8216;time&#8217;: 1549746446, &#8216;title&#8217;: &#8216;Jail time for tech companies who steal your data&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://trofire.com/2019/02/08/democrat-proposes-jail-time-for-tech-companies-who-steal-your-data/&#8217;}, {&#8217;by&#8217;: &#8216;dieulot&#8217;, &#8216;descendants&#8217;: 232, &#8216;id&#8217;: 19122727, &#8216;kids&#8217;: [19124065, 19123750, 19123281, 19124253, 19125482, 19122923, 19122975, 19123048, 19123145, 19122927, 19124325, 19125008, 19124064, 19124525, 19124584, 19123447, 19124363, 19124142, 19125174, 19124274, 19124717, 19124016, 19124667, 19123618, 19124974, 19124077, 19122947, 19124394, 19123983, 19123841, 19123848, 19123042, 19123959, 19123552, 19124152, 19122903, 19122982, 19123027, 19123716, 19123849, 19122955, 19124022, 19125171, 19124062, 19122957, 19123847, 19123775, 19123872, 19123784, 19123393, 19123321, 19124347, 19123247, 19123933, 19124322], &#8216;score&#8217;: 657, &#8216;time&#8217;: 1549726200, &#8216;title&#8217;: &#8216;Show HN: Make your site’s pages instant&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://instant.page/&#8217;}, {&#8217;by&#8217;: &#8216;andyjohnson0&#8217;, &#8216;descendants&#8217;: 7, &#8216;id&#8217;: 19124698, &#8216;kids&#8217;: [19125121, 19125158, 19125455, 19125052], &#8216;score&#8217;: 62, &#8216;time&#8217;: 1549747047, &#8216;title&#8217;: &#8216;The 26,000-Year Astronomical Monument Hidden in Plain Sight&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://blog.longnow.org/02019/01/29/the-26000-year-astronomical-monument-hidden-in-plain-sight/&#8217;}, {&#8217;by&#8217;: &#8216;n-izem&#8217;, &#8216;descendants&#8217;: 3, &#8216;id&#8217;: 19123506, &#8216;kids&#8217;: [19124052, 19124982, 19124926], &#8216;score&#8217;: 168, &#8216;time&#8217;: 1549733834, &#8216;title&#8217;: &#8216;Modern Robotics: Mechanics, Planning, and Control – Free Textbook (2017)&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://hades.mech.northwestern.edu/index.php/Modern_Robotics&#8217;}, {&#8217;by&#8217;: &#8216;royalharsh95&#8217;, &#8216;descendants&#8217;: 4, &#8216;id&#8217;: 19124480, &#8216;kids&#8217;: [19125537, 19125437, 19125329], &#8216;score&#8217;: 56, &#8216;time&#8217;: 1549744990, &#8216;title&#8217;: &#8216;Explain shell&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://explainshell.com/&#8217;}, {&#8217;by&#8217;: &#8216;howard941&#8217;, &#8216;descendants&#8217;: 48, &#8216;id&#8217;: 19122797, &#8216;kids&#8217;: [19123715, 19123632, 19123731, 19123740, 19123462, 19124304, 19125024, 19124355, 19124282, 19123800, 19124181, 19123650, 19124113, 19125390, 19124060, 19123511, 19123493], &#8216;score&#8217;: 123, &#8216;time&#8217;: 1549726987, &#8216;title&#8217;: &#8216;Attacking a Pay Wall That Hides Public Court Filings&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.nytimes.com/2019/02/04/us/politics/pacer-fees-lawsuit.html&#8217;}, {&#8217;by&#8217;: &#8216;ChrisArchitect&#8217;, &#8216;descendants&#8217;: 49, &#8216;id&#8217;: 19123207, &#8216;kids&#8217;: [19124614, 19125334, 19125471, 19125440, 19125136, 19124424, 19124602, 19124228, 19124170, 19124186, 19125465, 19124173, 19123234, 19124344, 19124276, 19124457, 19124487, 19124243, 19124101, 19124208, 19124362], &#8216;score&#8217;: 127, &#8216;time&#8217;: 1549730702, &#8216;title&#8217;: &#8216;Captain Marvel throwback site&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.marvel.com/captainmarvel&#8217;}, {&#8217;by&#8217;: &#8216;aliswe&#8217;, &#8216;descendants&#8217;: 33, &#8216;id&#8217;: 19123153, &#8216;kids&#8217;: [19124338, 19124270, 19124761, 19125521, 19124505, 19125089, 19125376, 19124295, 19124473, 19124346, 19124281, 19124176, 19124205, 19124839], &#8216;score&#8217;: 97, &#8216;time&#8217;: 1549730232, &#8216;title&#8217;: &#8216;Making Money from Open-Source Software&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://ayende.com/blog/186147-A/making-money-from-open-source-software-how-we-do-it&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
