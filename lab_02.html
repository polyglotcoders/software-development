<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>
  <li id="lab_6_link"><a href="lab_06.html">Client Side Programming</a></li>
  <li id="lab_7_link"><a href="lab_07.html">Node</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19233637, 19233706, 19233124, 19233247, 19208766, 19232824, 19234022, 19233284, 19232068, 19233638, 19234268, 19233727, 19234100, 19234264, 19233839, 19234101, 19233208, 19233493, 19233466, 19233401, 19233610, 19233605, 19217035, 19233289, 19233215, 19232343, 19227998, 19233045, 19207172, 19227383, 19234064, 19233894, 19231966, 19231567, 19231573, 19231322, 19228744, 19232144, 19216448, 19232804, 19232132, 19233860, 19227970, 19231088, 19225268, 19218313, 19228452, 19233013, 19220889, 19227070, 19225424, 19232022, 19234067, 19231115, 19224579, 19233456, 19223730, 19233611, 19231075, 19226355, 19226267, 19224594, 19223188, 19230570, 19207491, 19224657, 19209957, 19231079, 19228940, 19229433, 19229510, 19227441, 19218097, 19229773, 19232073, 19222748, 19233154, 19216527, 19232678, 19225895, 19225962, 19224566, 19226861, 19227846, 19216077, 19223377, 19225857, 19224567, 19222274, 19232366, 19224141, 19231973, 19225850, 19229159, 19224542, 19233241, 19226262, 19226071, 19217575, 19223694, 19225873, 19224887, 19226719, 19214821, 19226499, 19226666, 19216477, 19228508, 19226761, 19214387, 19208700, 19220892, 19225964, 19222542, 19222180, 19215934, 19228607, 19231004, 19220518, 19230792, 19221181, 19230241, 19231159, 19226472, 19222215, 19214035, 19231296, 19216315, 19215026, 19211361, 19226480, 19228399, 19216523, 19219212, 19216101, 19224672, 19231437, 19212771, 19224866, 19221520, 19214512, 19232495, 19223853, 19225494, 19232883, 19229922, 19231032, 19216428, 19228366, 19210727, 19214357, 19229306, 19216568, 19229432, 19213217, 19224939, 19230210, 19222191, 19207344, 19214141, 19219680, 19215199, 19226445, 19212127, 19211497, 19216019, 19221754, 19216589, 19218053, 19221443, 19224880, 19216371, 19216356, 19215276, 19210697, 19213285, 19212123, 19216649, 19219722, 19212987, 19229646, 19222921, 19216195, 19225577, 19227035, 19210941, 19229216, 19224884, 19231259, 19219478, 19218178, 19231993, 19210822, 19215724, 19232156, 19227309, 19227294, 19230306, 19219273, 19231393, 19213938, 19208508, 19229661, 19210882, 19226682, 19225766, 19216925, 19216243, 19215447, 19220658, 19215238, 19209527, 19220332, 19213950, 19232315, 19229584, 19211538, 19227614, 19216373, 19220988, 19216303, 19210043, 19212859, 19212929, 19227131, 19227434, 19214781, 19213605, 19212822, 19213508, 19231772, 19214952, 19222467, 19228947, 19230163, 19208293, 19229326, 19222705, 19210351, 19232164, 19220831, 19216681, 19212296, 19211996, 19220210, 19218540, 19215727, 19209909, 19222759, 19211428, 19215045, 19218036, 19219457, 19218339, 19220355, 19210932, 19207424, 19211244, 19209262, 19223845, 19226747, 19209785, 19215988, 19207624, 19213511, 19216349, 19208859, 19210584, 19220094, 19224995, 19211189, 19228851, 19223585, 19207518, 19213411, 19209213, 19207186, 19223408, 19207396, 19216148, 19223500, 19220543, 19211011, 19212086, 19224383, 19222456, 19210923, 19207523, 19216827, 19232340, 19216277, 19218408, 19226140, 19232086, 19230636, 19224005, 19215919, 19225688, 19215689, 19220128, 19224512, 19210331, 19217926, 19216692, 19226334, 19230060, 19226854, 19212375, 19216236, 19226002, 19217557, 19223301, 19217479, 19207657, 19208484, 19227962, 19215299, 19226474, 19226406, 19208181, 19208004, 19226208, 19214887, 19207834, 19211154, 19215265, 19211129, 19228746, 19218163, 19214348, 19218068, 19214076, 19211970, 19230133, 19207956, 19221845, 19216066, 19214359, 19214955, 19214938, 19226040, 19213160, 19230245, 19214861, 19213100, 19222939, 19207187, 19222547, 19209210, 19227602, 19212068, 19222070, 19229230, 19210512, 19213297, 19215312, 19217499, 19213387, 19228904, 19221056, 19225009, 19211709, 19207226, 19217409, 19219710, 19215927, 19223264, 19228601, 19222457, 19223566, 19220384, 19225664, 19220029, 19219089, 19214339, 19221325, 19215763, 19213458, 19224241, 19213893, 19213833, 19216853, 19227121, 19215809, 19220608, 19213105, 19212238, 19226692, 19213942, 19209964, 19214333, 19213216, 19224073, 19217856, 19223429, 19208486, 19225498, 19214589, 19213857, 19222835, 19208078, 19223840, 19216333, 19207416, 19213587, 19222716, 19219382, 19212502, 19217048, 19220434, 19224699, 19225793, 19224625, 19212700, 19221843, 19213379, 19214499, 19221146, 19221353, 19222773, 19210953, 19210717, 19220223, 19208774, 19211168, 19215720, 19219233, 19214510, 19214194, 19221836, 19214270, 19213124, 19216212, 19218076, 19221253, 19223458, 19221039, 19207927, 19207199, 19211415, 19214353, 19228610, 19212393, 19222859, 19211532, 19216308, 19214966, 19216177, 19214595, 19222296, 19214229, 19217765, 19215544, 19221898, 19211366, 19226400, 19220626, 19216912, 19221430, 19207494, 19209291, 19219735, 19213501, 19213372, 19212995, 19212648, 19214946, 19217899, 19214865, 19207850, 19214811, 19211810, 19214700, 19222305, 19217240, 19209345, 19209305, 19213731, 19213612, 19225721, 19213058, 19215869, 19209646, 19212397, 19211376, 19215251, 19220218, 19215065, 19214447, 19207764, 19213815, 19213510, 19212747, 19212493, 19224830, 19211207, 19213180, 19208409, 19209314, 19208799]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19233637, 19233706, 19233124, 19233247, 19208766, 19232824, 19234022, 19233284, 19232068, 19233638]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;octosphere&#8217;, &#8216;descendants&#8217;: 29, &#8216;id&#8217;: 19233637, &#8216;kids&#8217;: [19233986, 19233854, 19234516, 19234085, 19234202, 19234062, 19234120, 19233875, 19233913, 19234019, 19233853, 19234206], &#8216;score&#8217;: 125, &#8216;time&#8217;: 1550934933, &#8216;title&#8217;: &#8216;Cleave.js – Format input text content when you are typing&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://nosir.github.io/cleave.js/&#8217;}, {&#8217;by&#8217;: &#8216;lelf&#8217;, &#8216;descendants&#8217;: 19, &#8216;id&#8217;: 19233706, &#8216;kids&#8217;: [19234522, 19234069, 19234313, 19234350, 19234040, 19234330, 19234258, 19234190, 19234218], &#8216;score&#8217;: 63, &#8216;time&#8217;: 1550935782, &#8216;title&#8217;: &#8216;The Famous Photo of Chernobyl’s Most Dangerous Radioactive Material Was a Selfie&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.atlasobscura.com/articles/the-famous-photo-of-chernobyls-most-dangerous-radioactive-material-was-a-selfie&#8217;}, {&#8217;by&#8217;: &#8216;ingve&#8217;, &#8216;descendants&#8217;: 10, &#8216;id&#8217;: 19233124, &#8216;kids&#8217;: [19233726, 19233615, 19233291, 19233580, 19233347, 19233311], &#8216;score&#8217;: 152, &#8216;time&#8217;: 1550926286, &#8216;title&#8217;: &#8216;Halley: Lightweight Game Engine Written in C++14&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://github.com/amzeratul/halley&#8217;}, {&#8217;by&#8217;: &#8216;longdefeat&#8217;, &#8216;descendants&#8217;: 54, &#8216;id&#8217;: 19233247, &#8216;kids&#8217;: [19233684, 19233719, 19234508, 19233547, 19234450, 19233520, 19234184, 19233748, 19234104, 19233742, 19233729, 19233768, 19233579], &#8216;score&#8217;: 111, &#8216;time&#8217;: 1550928630, &#8216;title&#8217;: &#8216;We’re Reading Fahrenheit 451 Wrong (2018)&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://thefrailestthing.com/2018/06/15/were-reading-fahrenheit-451-wrong/&#8217;}, {&#8217;by&#8217;: &#8216;lelf&#8217;, &#8216;descendants&#8217;: 46, &#8216;id&#8217;: 19208766, &#8216;kids&#8217;: [19232926, 19233309, 19233268, 19233221, 19233447, 19233851, 19233218, 19233138, 19233235], &#8216;score&#8217;: 185, &#8216;time&#8217;: 1550677643, &#8216;title&#8217;: &#8216;Trolls Are Real&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.eff.org/effector/32/3&#8217;}, {&#8217;by&#8217;: &#8216;Tomte&#8217;, &#8216;descendants&#8217;: 77, &#8216;id&#8217;: 19232824, &#8216;kids&#8217;: [19233411, 19233554, 19233480, 19233352, 19234372, 19234246, 19233870, 19233759, 19233664, 19233906, 19233084, 19233412], &#8216;score&#8217;: 113, &#8216;time&#8217;: 1550921893, &#8216;title&#8217;: &#8216;Why Does Julia Work So Well?&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://ucidatascienceinitiative.github.io/IntroToJulia/Html/WhyJulia&#8217;}, {&#8217;by&#8217;: &#8216;petethomas&#8217;, &#8216;descendants&#8217;: 0, &#8216;id&#8217;: 19234022, &#8216;score&#8217;: 12, &#8216;time&#8217;: 1550939597, &#8216;title&#8217;: &#8216;India proposes new e-commerce regulations with focus on data rules&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.reuters.com/article/us-india-ecommerce/india-proposes-new-e-commerce-regulations-with-focus-on-data-rules-idUSKCN1QC0LO&#8217;}, {&#8217;by&#8217;: &#8216;longdefeat&#8217;, &#8216;descendants&#8217;: 52, &#8216;id&#8217;: 19233284, &#8216;kids&#8217;: [19233872, 19233572, 19233536, 19233702, 19233902, 19233496, 19233636, 19234011, 19234027, 19234310, 19233880, 19234009, 19233646, 19233472, 19233642, 19233548], &#8216;score&#8217;: 120, &#8216;time&#8217;: 1550929330, &#8216;title&#8217;: &#8216;Toxic ‘Forever Chemicals’ in Drinking Water Leave Military Families Reeling&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.nytimes.com/2019/02/22/us/military-water-toxic-chemicals.html&#8217;}, {&#8217;by&#8217;: &#8216;jessealama&#8217;, &#8216;descendants&#8217;: 64, &#8216;id&#8217;: 19232068, &#8216;kids&#8217;: [19232525, 19233434, 19234458, 19233897, 19234307, 19232814, 19233410, 19233314, 19233627, 19232560, 19232655, 19232532, 19232552, 19233473, 19233142, 19232616, 19233191], &#8216;score&#8217;: 209, &#8216;time&#8217;: 1550903948, &#8216;title&#8217;: &#8216;Why Language-Oriented Programming? Why Racket?&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://beautifulracket.com/appendix/why-lop-why-racket.html&#8217;}, {&#8217;by&#8217;: &#8216;octosphere&#8217;, &#8216;descendants&#8217;: 6, &#8216;id&#8217;: 19233638, &#8216;kids&#8217;: [19234044, 19234292, 19234097], &#8216;score&#8217;: 26, &#8216;time&#8217;: 1550934964, &#8216;title&#8217;: &#8216;Buefy: Lightweight UI Components for Vue.js Based on Bulma&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://buefy.org/&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
