<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19063727, 19064069, 19063540, 19063711, 19062667, 19063064, 19063977, 19063548, 19063446, 19063996, 19060699, 19063829, 19063958, 19060608, 19060487, 19062674, 19063309, 19062514, 19063759, 19057848, 19061113, 19061034, 19062504, 19062737, 19062707, 19063953, 19062253, 19064257, 19058971, 19062042, 19060491, 19058702, 19060394, 19061135, 19064093, 19062791, 19061656, 19055119, 19055166, 19062433, 19060985, 19057673, 19063756, 19062531, 19060256, 19061745, 19056808, 19058108, 19060678, 19052688, 19060748, 19052830, 19054440, 19060510, 19062368, 19057604, 19052587, 19060407, 19051914, 19062963, 19052817, 19060683, 19050509, 19057331, 19049834, 19059674, 19056253, 19051866, 19057643, 19057277, 19063979, 19055312, 19058713, 19054558, 19060523, 19051435, 19054358, 19045250, 19057623, 19047384, 19059118, 19048204, 19059719, 19059028, 19060502, 19060069, 19056656, 19057683, 19061679, 19052062, 19050998, 19046238, 19059120, 19054501, 19046468, 19054398, 19048849, 19062638, 19047530, 19055165, 19040648, 19056805, 19062840, 19041303, 19038374, 19046461, 19054932, 19046259, 19050681, 19046475, 19057146, 19057742, 19046826, 19056911, 19040670, 19046952, 19053275, 19063946, 19062435, 19035814, 19039525, 19048946, 19061542, 19054150, 19051415, 19061323, 19049448, 19042850, 19045090, 19054544, 19044409, 19053724, 19039593, 19047096, 19050073, 19060433, 19054136, 19047503, 19059109, 19046108, 19044032, 19038327, 19055164, 19048126, 19058382, 19056698, 19057514, 19062402, 19044340, 19055994, 19051541, 19051604, 19058329, 19061969, 19043613, 19050482, 19062250, 19036744, 19047447, 19038258, 19036454, 19044988, 19054576, 19048218, 19059034, 19041021, 19048976, 19050102, 19039597, 19042490, 19035684, 19036899, 19045578, 19048108, 19048787, 19050738, 19061105, 19052901, 19047620, 19047609, 19051205, 19054685, 19061401, 19041956, 19056974, 19046289, 19042386, 19056993, 19044713, 19061812, 19050807, 19046131, 19038826, 19036262, 19044295, 19051438, 19037573, 19060185, 19061123, 19049384, 19060596, 19052955, 19037283, 19044176, 19043816, 19059959, 19061554, 19060420, 19038159, 19039927, 19058057, 19042232, 19038196, 19051222, 19035204, 19036686, 19057451, 19049053, 19062491, 19060712, 19055694, 19039803, 19053628, 19051080, 19037625, 19059973, 19052931, 19057862, 19038589, 19055562, 19045387, 19044360, 19043248, 19040389, 19035834, 19053153, 19051433, 19055182, 19037467, 19051275, 19038785, 19046852, 19044467, 19039799, 19050609, 19040422, 19041667, 19035765, 19038793, 19055570, 19042775, 19046756, 19037960, 19052964, 19038092, 19050240, 19039470, 19046000, 19059503, 19053183, 19038132, 19040445, 19043161, 19048571, 19037954, 19044282, 19048880, 19036106, 19051145, 19051332, 19047589, 19036532, 19050710, 19041241, 19044728, 19050737, 19060056, 19045999, 19050121, 19040376, 19055734, 19050140, 19038263, 19044929, 19051093, 19059753, 19059735, 19037024, 19057058, 19059428, 19039829, 19045757, 19051367, 19042114, 19042965, 19035180, 19045456, 19041807, 19038791, 19058959, 19039691, 19058701, 19052481, 19053775, 19045141, 19053444, 19047093, 19040966, 19047293, 19049956, 19051487, 19048297, 19049251, 19053318, 19038580, 19040642, 19054026, 19057122, 19053226, 19044406, 19041626, 19056890, 19056826, 19039934, 19047314, 19044034, 19052590, 19044060, 19040592, 19050616, 19049025, 19055805, 19038378, 19048943, 19061677, 19051098, 19038979, 19046074, 19051872, 19052952, 19037642, 19039012, 19044066, 19036683, 19036412, 19050388, 19044667, 19035839, 19035781, 19042243, 19038420, 19053642, 19045822, 19035189, 19052321, 19044865, 19046322, 19050775, 19040893, 19045817, 19039376, 19040276, 19040203, 19043264, 19040456, 19039994, 19050273, 19051570, 19041632, 19052987, 19037389, 19039920, 19059662, 19037303, 19052831, 19036785, 19040873, 19059655, 19040139, 19043564, 19050497, 19050442, 19041848, 19052119, 19037931, 19049946, 19042955, 19040055, 19037608, 19045918, 19041249, 19052011, 19039562, 19039505, 19052198, 19051889, 19038110, 19038363, 19043103, 19039818, 19051188, 19037477, 19043698, 19042193, 19041022, 19041291, 19044472, 19040451, 19043182, 19046125, 19042288, 19054314, 19056580, 19040843, 19037807, 19042125, 19043829, 19038120, 19042433, 19042334, 19039016, 19040963, 19043227, 19040696, 19040484, 19043005, 19043004, 19042980, 19045970, 19042800, 19039787, 19039671, 19039192, 19042271, 19037738, 19041353, 19041200, 19035142, 19036698, 19043644, 19040106, 19035630, 19039099, 19038943, 19038153, 19042968, 19042765, 19037139, 19036838, 19037784, 19042528, 19036152, 19054343, 19035582, 19035579, 19038198, 19040867, 19039071, 19038856, 19052230, 19037595, 19037290, 19036954, 19037399, 19047222, 19054535, 19059577, 19041302, 19044387, 19035945, 19035438, 19053409, 19035397, 19037983, 19058750, 19059560, 19050159, 19044653, 19044900, 19046816, 19035588]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19063727, 19064069, 19063540, 19063711, 19062667, 19063064, 19063977, 19063548, 19063446, 19063996]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;boreq&#8217;, &#8216;descendants&#8217;: 117, &#8216;id&#8217;: 19063727, &#8216;kids&#8217;: [19064523, 19063844, 19064154, 19063912, 19064435, 19063815, 19063846, 19063945, 19064450, 19063874, 19064083, 19063954, 19064429, 19064157, 19064107, 19064170, 19064086, 19064126, 19064062, 19063842, 19063975, 19063960, 19064254, 19064025], &#8216;score&#8217;: 183, &#8216;time&#8217;: 1549124081, &#8216;title&#8217;: &#8216;Dotfile madness&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://0&#215;46.net/thoughts/2019/02/01/dotfile-madness/&#8217;}, {&#8217;by&#8217;: &#8216;rch&#8217;, &#8216;descendants&#8217;: 34, &#8216;id&#8217;: 19064069, &#8216;kids&#8217;: [19064310, 19064272, 19064399, 19064484, 19064522, 19064362, 19064390, 19064252, 19064228], &#8216;score&#8217;: 77, &#8216;time&#8217;: 1549126880, &#8216;title&#8217;: &#8216;A Python Interpreter Written in Rust&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://github.com/RustPython/RustPython&#8217;}, {&#8217;by&#8217;: &#8216;ch_123&#8217;, &#8216;descendants&#8217;: 46, &#8216;id&#8217;: 19063540, &#8216;kids&#8217;: [19063719, 19063763, 19063671, 19063676, 19063998, 19064000, 19064493, 19064234, 19064412, 19063724, 19063684, 19063963], &#8216;score&#8217;: 77, &#8216;time&#8217;: 1549122306, &#8216;title&#8217;: &#8216;Intel to Discontinue Itanium 9700 ‘Kittson’ Processor, the Last of the Itaniums&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.anandtech.com/show/13924/intel-to-discontinue-itanium-9700-kittson-processor-the-last-itaniums&#8217;}, {&#8217;by&#8217;: &#8216;tysone&#8217;, &#8216;descendants&#8217;: 22, &#8216;id&#8217;: 19063711, &#8216;kids&#8217;: [19064184, 19064236, 19064488, 19064078, 19064058, 19063888, 19064341, 19064081], &#8216;score&#8217;: 55, &#8216;time&#8217;: 1549123906, &#8216;title&#8217;: &#8216;Be Careful about 23andMe’s Health Test&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.nytimes.com/interactive/2019/02/01/opinion/23andme-cancer-dna-test-brca.html&#8217;}, {&#8217;by&#8217;: &#8216;dnetesn&#8217;, &#8216;descendants&#8217;: 20, &#8216;id&#8217;: 19062667, &#8216;kids&#8217;: [19063183, 19064207, 19063509, 19063776, 19063532], &#8216;score&#8217;: 117, &#8216;time&#8217;: 1549110690, &#8216;title&#8217;: &#8216;What Impossible Meant to Feynman&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://nautil.us/issue/68/context/what-impossible-meant-to-feynman&#8217;}, {&#8217;by&#8217;: &#8216;mverwijs&#8217;, &#8216;descendants&#8217;: 10, &#8216;id&#8217;: 19063064, &#8216;kids&#8217;: [19064162, 19064470, 19064421, 19064291, 19064240, 19064511], &#8216;score&#8217;: 52, &#8216;time&#8217;: 1549116926, &#8216;title&#8217;: &#8216;‘The Age of Surveillance Capitalism’&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.nytimes.com/2019/01/29/opinion/artificial-intelligence-surveillance.html&#8217;}, {&#8217;by&#8217;: &#8216;throwawaymath&#8217;, &#8216;descendants&#8217;: 5, &#8216;id&#8217;: 19063977, &#8216;kids&#8217;: [19064325, 19064367, 19064356], &#8216;score&#8217;: 13, &#8216;time&#8217;: 1549126142, &#8216;title&#8217;: &#8216;RenTech Created the Ultimate, Tax-Free <span class="caps">IRA</span> Account for Employees&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.bloomberg.com/news/articles/2019-02-01/rentech-created-the-ultimate-tax-free-ira-account-for-employees&#8217;}, {&#8217;by&#8217;: &#8216;ausjke&#8217;, &#8216;descendants&#8217;: 38, &#8216;id&#8217;: 19063548, &#8216;kids&#8217;: [19064582, 19064562, 19064084, 19064546, 19064410, 19064384, 19064029, 19064112, 19063777, 19063866, 19063781, 19063867, 19063799], &#8216;score&#8217;: 57, &#8216;time&#8217;: 1549122390, &#8216;title&#8217;: &#8216;Openwrt 18.06.2 released&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://openwrt.org/releases/18.06/notes-18.06.2&#8217;}, {&#8217;by&#8217;: &#8216;amelius&#8217;, &#8216;descendants&#8217;: 22, &#8216;id&#8217;: 19063446, &#8216;kids&#8217;: [19064153, 19064540, 19064164, 19064454, 19063941], &#8216;score&#8217;: 17, &#8216;time&#8217;: 1549121247, &#8216;title&#8217;: &#8216;Whole-body cryotherapy as adjunct treatment of depressive and anxiety disorders&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2734249/&#8217;}, {&#8217;by&#8217;: &#8216;dorianm&#8217;, &#8216;descendants&#8217;: 1, &#8216;id&#8217;: 19063996, &#8216;kids&#8217;: <sup class="footnote" id="fnr19064400"><a href="#fn19064400">19064400</a></sup>, &#8216;score&#8217;: 9, &#8216;time&#8217;: 1549126327, &#8216;title&#8217;: &#8216;Inside Cloudbleed&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.rsaconference.com/videos/inside-cloudbleed&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
