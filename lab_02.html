<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>
  <li id="lab_6_link"><a href="lab_06.html">Client Side Programming</a></li>
  <li id="lab_7_link"><a href="lab_07.html">Node</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19259081, 19257358, 19259364, 19258429, 19258717, 19254828, 19256845, 19251516, 19258987, 19255102, 19259911, 19256431, 19256345, 19255802, 19255603, 19254818, 19256514, 19257434, 19257727, 19255475, 19258551, 19257241, 19258472, 19245811, 19248711, 19256271, 19258241, 19259605, 19256313, 19255302, 19258826, 19256553, 19259099, 19256059, 19257675, 19257350, 19254619, 19252952, 19260167, 19253616, 19256096, 19258949, 19255227, 19258447, 19257857, 19252437, 19255286, 19253333, 19258968, 19259106, 19253872, 19252173, 19249703, 19258059, 19253787, 19248723, 19247265, 19255131, 19255206, 19244686, 19256746, 19259363, 19252852, 19253038, 19247374, 19259982, 19243881, 19244975, 19252350, 19246012, 19248790, 19256772, 19245986, 19256654, 19240770, 19253072, 19252497, 19251755, 19245862, 19257103, 19247664, 19257409, 19257677, 19247535, 19255690, 19259451, 19247821, 19248512, 19258616, 19257086, 19258061, 19249688, 19256970, 19252276, 19241570, 19256753, 19245712, 19248104, 19256523, 19253364, 19257062, 19246406, 19249271, 19248171, 19256336, 19246447, 19247633, 19241427, 19247538, 19249328, 19251188, 19246209, 19254110, 19257797, 19253419, 19241096, 19254751, 19239940, 19254931, 19243651, 19253811, 19244194, 19241974, 19259023, 19244985, 19238221, 19258370, 19256537, 19251342, 19245245, 19240832, 19247515, 19250698, 19247493, 19246421, 19254578, 19253447, 19254508, 19250336, 19245002, 19254409, 19244051, 19245162, 19249491, 19249647, 19252358, 19243543, 19257400, 19241545, 19244071, 19244080, 19248528, 19246723, 19246680, 19249042, 19256805, 19243670, 19258442, 19243838, 19249487, 19232907, 19245663, 19257009, 19258371, 19250552, 19244301, 19248970, 19254652, 19248504, 19258285, 19248424, 19258272, 19252901, 19258231, 19257442, 19255760, 19240742, 19244687, 19248505, 19257221, 19244063, 19236990, 19245537, 19241236, 19234664, 19238365, 19257063, 19239776, 19243246, 19241283, 19246668, 19253147, 19247596, 19238400, 19233637, 19254537, 19237608, 19257847, 19247247, 19236859, 19237969, 19252131, 19235017, 19245485, 19242698, 19249895, 19244570, 19244893, 19238340, 19244028, 19237704, 19251981, 19243930, 19236249, 19253978, 19255527, 19233706, 19237052, 19251767, 19240154, 19236349, 19238794, 19256645, 19241246, 19239247, 19256600, 19232824, 19241187, 19246432, 19238393, 19238995, 19233124, 19242058, 19238085, 19247907, 19237710, 19238740, 19238121, 19254008, 19255939, 19255921, 19242553, 19238174, 19254809, 19247869, 19239317, 19243247, 19241245, 19235158, 19241394, 19248518, 19243630, 19245453, 19250827, 19254976, 19237527, 19248073, 19254841, 19248398, 19248702, 19250302, 19242370, 19246304, 19237730, 19233638, 19248334, 19233247, 19237592, 19251316, 19243304, 19239674, 19235873, 19238277, 19252328, 19254201, 19249810, 19250668, 19251383, 19240168, 19250060, 19245104, 19251684, 19244947, 19239658, 19238638, 19236025, 19233208, 19247859, 19251058, 19253714, 19248249, 19236245, 19237843, 19248637, 19233466, 19235417, 19235361, 19236568, 19238054, 19243548, 19243208, 19234260, 19233045, 19233610, 19249035, 19237724, 19233284, 19238148, 19233727, 19235028, 19241484, 19251589, 19237851, 19242725, 19238326, 19246459, 19253061, 19252336, 19239615, 19252138, 19243314, 19238976, 19249009, 19239283, 19234877, 19252031, 19233215, 19248716, 19235702, 19242160, 19248554, 19249238, 19234421, 19243594, 19247718, 19243505, 19236487, 19240592, 19247516, 19244588, 19236130, 19244402, 19236011, 19237058, 19236077, 19239064, 19242444, 19234264, 19249805, 19247996, 19233605, 19250097, 19253829, 19250817, 19252075, 19250647, 19235021, 19241998, 19251958, 19235983, 19249366, 19248520, 19248408, 19238905, 19248133, 19248059, 19248838, 19234262, 19237990, 19237952, 19233648, 19240480, 19246907, 19249182, 19233013, 19234022, 19248873, 19248826, 19239392, 19233401, 19238303, 19232804, 19233839, 19248423, 19249463, 19248018, 19250738, 19233797, 19233493, 19247540, 19250510, 19250455, 19233011, 19250378, 19247238, 19242806, 19250134, 19239479, 19237253, 19233289, 19234843, 19244328, 19235078, 19249228, 19237581, 19249092, 19250437, 19245363, 19234100, 19248615, 19235297, 19247949, 19252712, 19235541, 19250696, 19254903, 19237383, 19248575, 19238286, 19235319, 19234061, 19234012, 19249383, 19233467, 19234618, 19236658, 19240087, 19234064, 19240509, 19235684, 19242356, 19236924, 19241896, 19238230, 19243742, 19240277, 19243827, 19235270, 19243056, 19239906, 19233860, 19238507, 19239639, 19242662, 19236328, 19238987, 19241895, 19235324, 19238090, 19234222, 19245319, 19237776, 19233611, 19233241, 19235330, 19239559, 19232883, 19239494, 19238633, 19234505, 19233456, 19233894, 19237872, 19235131, 19237772, 19234970, 19237683, 19242640, 19234295, 19237483, 19242191, 19235846, 19235026, 19234552, 19238261, 19239319, 19236719, 19232678, 19234101, 19237702, 19239489, 19239727, 19237068, 19232589, 19234267, 19255176, 19255096]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19259081, 19257358, 19259364, 19258429, 19258717, 19254828, 19256845, 19251516, 19258987, 19255102]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;xwipeoutx&#8217;, &#8216;descendants&#8217;: 28, &#8216;id&#8217;: 19259081, &#8216;kids&#8217;: [19260338, 19259383, 19259669, 19259534, 19259421, 19259305, 19260467, 19260126], &#8216;score&#8217;: 104, &#8216;time&#8217;: 1551221188, &#8216;title&#8217;: &#8216;How does the Hololens 2 matter?&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;http://stevesspace.com/2019/02/how-does-hololens2-matter/&#8217;}, {&#8217;by&#8217;: &#8216;minimaxir&#8217;, &#8216;descendants&#8217;: 131, &#8216;id&#8217;: 19257358, &#8216;kids&#8217;: [19257729, 19258601, 19258271, 19257613, 19257688, 19260095, 19260136, 19259379, 19258450, 19259018, 19257714, 19258674, 19258482, 19259122, 19259125, 19259983, 19257990], &#8216;score&#8217;: 203, &#8216;time&#8217;: 1551208304, &#8216;title&#8217;: &#8216;<span class="caps">FTC</span> Brings First Case Challenging Fake Paid Reviews on an Indie Retail Website&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.ftc.gov/news-events/press-releases/2019/02/ftc-brings-first-case-challenging-fake-paid-reviews-independent&#8217;}, {&#8217;by&#8217;: &#8216;bobajeff&#8217;, &#8216;descendants&#8217;: 17, &#8216;id&#8217;: 19259364, &#8216;kids&#8217;: [19259631, 19259886, 19259626, 19259852, 19259889, 19259529, 19259839], &#8216;score&#8217;: 51, &#8216;time&#8217;: 1551223368, &#8216;title&#8217;: &#8216;Additively manufacturable micro-mechanical logic gates&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.nature.com/articles/s41467-019-08678-0&#8217;}, {&#8217;by&#8217;: &#8216;prostoalex&#8217;, &#8216;descendants&#8217;: 143, &#8216;id&#8217;: 19258429, &#8216;kids&#8217;: [19259108, 19259951, 19259079, 19259967, 19259248, 19259941, 19260297, 19260128, 19259422, 19260400, 19260180, 19259539, 19260073, 19260219, 19259498, 19259540, 19259909, 19260181, 19259960, 19259959, 19259853, 19259794], &#8216;score&#8217;: 74, &#8216;time&#8217;: 1551216417, &#8216;title&#8217;: &#8220;Taxing Uber and Lyft rides is L.A&#8217;s latest plan to free up congested roads&#8221;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.latimes.com/local/lanow/la-me-ln-uber-tax-los-angeles-20190226-story.html#nws=mcnewsletter&#8217;}, {&#8217;by&#8217;: &#8216;tosh&#8217;, &#8216;descendants&#8217;: 98, &#8216;id&#8217;: 19258717, &#8216;kids&#8217;: [19259069, 19259480, 19259833, 19260398, 19258972, 19260266, 19258933, 19259020, 19258986, 19259552, 19260214, 19260052, 19259021, 19260035, 19259137, 19260269, 19259604, 19259596, 19259078, 19259887, 19259283, 19259582, 19259952, 19259195, 19259912, 19259645], &#8216;score&#8217;: 214, &#8216;time&#8217;: 1551218521, &#8216;title&#8217;: &#8216;Pi-Hole – A black hole for Internet advertisements&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://github.com/pi-hole/pi-hole&#8217;}, {&#8217;by&#8217;: &#8216;asadlionpk&#8217;, &#8216;descendants&#8217;: 202, &#8216;id&#8217;: 19254828, &#8216;kids&#8217;: [19255309, 19255067, 19258190, 19256779, 19259712, 19256638, 19259255, 19255002, 19256040, 19255699, 19257169, 19257628, 19258493, 19255630, 19255039, 19258153, 19256935, 19255062, 19255336, 19255195, 19255073, 19255168, 19257123, 19255395, 19255753, 19255270, 19258619, 19258569, 19255743, 19255055, 19255862, 19255530, 19255441, 19256369, 19257179, 19256857, 19258258, 19255261, 19255307, 19256990, 19258596, 19256719, 19259939, 19259936], &#8216;score&#8217;: 410, &#8216;time&#8217;: 1551193680, &#8216;title&#8217;: &#8216;Show HN: Zero Server – Zero configuration web framework&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://zeroserver.io/&#8217;}, {&#8217;by&#8217;: &#8216;ilamont&#8217;, &#8216;descendants&#8217;: 62, &#8216;id&#8217;: 19256845, &#8216;kids&#8217;: [19257070, 19259510, 19257563, 19257032, 19258194, 19257080, 19257099, 19257134, 19257298, 19257776, 19257632, 19257772, 19260263, 19257435, 19257190], &#8216;score&#8217;: 161, &#8216;time&#8217;: 1551205005, &#8216;title&#8217;: &#8216;Confessions of a location data exec&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://digiday.com/marketing/confessions-location-data-exec/&#8217;}, {&#8217;by&#8217;: &#8216;dmit&#8217;, &#8216;descendants&#8217;: 10, &#8216;id&#8217;: 19251516, &#8216;kids&#8217;: [19260388, 19260033, 19259707], &#8216;score&#8217;: 55, &#8216;time&#8217;: 1551148259, &#8216;title&#8217;: &#8216;The Unscalable, Deadlock-Prone, Thread Pool&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://pvk.ca/Blog/2019/02/25/the-unscalable-thread-pool/&#8217;}, {&#8217;by&#8217;: &#8216;headmelted&#8217;, &#8216;descendants&#8217;: 14, &#8216;id&#8217;: 19258987, &#8216;kids&#8217;: [19259225, 19259353, 19260031, 19260029, 19259546, 19260352, 19259432, 19259221], &#8216;score&#8217;: 46, &#8216;time&#8217;: 1551220515, &#8216;title&#8217;: &#8216;Show HN: Visual Studio Code for Chromebooks and Raspberry Pi&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://code.headmelted.com&#8217;}, {&#8217;by&#8217;: &#8216;jbegley&#8217;, &#8216;descendants&#8217;: 133, &#8216;id&#8217;: 19255102, &#8216;kids&#8217;: [19255338, 19257296, 19260024, 19255402, 19256946, 19255791, 19256008, 19255360, 19255388, 19255991, 19256127, 19257979, 19257465, 19255329, 19255487, 19257640, 19258236, 19258751, 19257592, 19258320, 19258065, 19255465, 19256594, 19257728, 19259965], &#8216;score&#8217;: 218, &#8216;time&#8217;: 1551195461, &#8216;title&#8217;: &#8216;Cloudflare expands its government warrant canaries&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://techcrunch.com/2019/02/26/cloudflare-warrant-canary/&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
