<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Lab 2 - Software Development</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0 viewport-fit=cover"">
    <meta name="description" content="A guided tour thatintroduces students to building web applications">
    <meta name="theme-color" content="#0000ff">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" media="screen" href="reset.css">
    <link rel="stylesheet" media="screen" href="screen.css">
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1142510-7']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <script type="text/javascript" src="UI.js"></script>
  </head>

  <body data-lab-id="2">
    <a href="#content" tabindex="1" class="skip-to-content">
      Skip to content
    </a>

    <div class="layout">
      <div id="index">
        <p class="link-home">
          <a href="index.html"><span>Software Development</span></a>
        </p>
        <button class="link-menu">Menu</button>
        <nav tabindex="0">
          <ol>
              <li id="lab_1_link"><a href="lab_01.html">Client-Server Model</a></li>
  <li id="lab_2_link"><a href="lab_02.html">API</a></li>
  <li id="lab_3_link"><a href="lab_03.html">Homework Assignment 04</a></li>
  <li id="lab_4_link"><a href="lab_04.html">REST</a></li>
  <li id="lab_5_link"><a href="lab_05.html">SQL</a></li>

          </ol>
        </nav>
      </div>

      <div id="content" tabindex="-1">
        <h1 class="lab_title"><em>lab 2</em>  <span class="caps">API</span></h1>
<h2>Goals</h2>
<ul>
	<li>To understand what an <span class="caps">API</span> is</li>
	<li>Make <span class="caps">API</span> calls from the console</li>
	<li>Make <span class="caps">API</span> calls from python code</li>
</ul>
<h2>What is an <span class="caps">API</span>?</h2>
<p>An <span class="caps">API</span> is a software-to-software interface. Recall in class us talking about computers fetching information or data from another computer. In our case we might fetch the latest Tweets from Twitter&#8217;s <span class="caps">API</span>, or the latest posts in Reddit&#8217;s <span class="caps">API</span>.</p>
<h2>What is an endpoint?</h2>
<p>Just an <span class="caps">HTML</span> address that gives you access to data</p>
<p>Let&#8217;s install <a href="https://www.getpostman.com/">Postman</a></p>
<p>Now let&#8217;s first take a look at reddit&#8217;s <span class="caps">API</span> for a particular subreddit.</p>
<p>Go to <a href="https://www.reddit.com/r/ubc.json">https://www.reddit.com/r/ubc.json</a>. You&#8217;ll see that this gives us data for that particular subreddit. Now let&#8217;s use postman to fetch it.</p>
<h2>So what&#8217;s the point of all of this?</h2>
<p>Well, you&#8217;ll be running your sentiment analyzer on all the posts of a particular subreddit of your choice by fetching data for that subreddit. We&#8217;ll first be hardcoding it to return values, then we&#8217;ll start doing javascript to take in inputs</p>
<h2>So how do I make a request to fetch information?</h2>
<p>Let&#8217;s say we wanted to play around with <a href="https://github.com/HackerNews/API"> hacker news&#8217; <span class="caps">API</span> </a></p>
<p>Let&#8217;s get the top 10 story ids on Hacker News&#8217; <span class="caps">API</span></p>
<h3 class="file-heading"><em>request_json_ubc.py</em></h3>
<pre class="file">import requests

# Get top story ids on hacker news
response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')
print(response.json())
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_json_ubc.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_json_ubc.py</div>
<p>[19105733, 19110698, 19109474, 19109027, 19108787, 19106922, 19109371, 19106771, 19110215, 19108206, 19106658, 19106475, 19106767, 19105426, 19106796, 19098233, 19108017, 19109455, 19110041, 19106772, 19108781, 19102637, 19109220, 19108911, 19107831, 19106111, 19109092, 19110445, 19106524, 19106316, 19105663, 19110955, 19088124, 19108115, 19109276, 19107518, 19106998, 19107940, 19106632, 19111235, 19101194, 19104880, 19109246, 19107805, 19109213, 19104331, 19108230, 19106782, 19109416, 19086712, 19104853, 19105749, 19101209, 19106930, 19096358, 19093015, 19109101, 19103557, 19104044, 19104438, 19107374, 19107826, 19105309, 19104959, 19108233, 19104065, 19104980, 19104167, 19088839, 19110086, 19104122, 19104650, 19108604, 19104734, 19107876, 19094502, 19105905, 19110887, 19100365, 19104112, 19108241, 19108697, 19096844, 19087558, 19107251, 19096369, 19108239, 19108353, 19107814, 19103448, 19100366, 19101363, 19110202, 19108678, 19106863, 19106507, 19085534, 19097349, 19109241, 19106209, 19107960, 19096832, 19096104, 19095849, 19100257, 19098246, 19099163, 19096177, 19101648, 19094418, 19100955, 19108599, 19104211, 19106894, 19084668, 19109200, 19094443, 19108854, 19095952, 19106412, 19108293, 19103961, 19094639, 19092074, 19107821, 19105479, 19106484, 19106399, 19092066, 19096565, 19097650, 19087418, 19108452, 19105086, 19094703, 19108368, 19096322, 19091415, 19096692, 19107778, 19104562, 19086235, 19094009, 19094523, 19094859, 19101020, 19096233, 19104581, 19095919, 19100129, 19104098, 19105596, 19094818, 19105278, 19099887, 19101156, 19108034, 19108652, 19106721, 19092606, 19094348, 19098562, 19100986, 19097179, 19106541, 19097719, 19094786, 19109080, 19092300, 19107692, 19094471, 19099162, 19107385, 19100050, 19099741, 19107163, 19084769, 19087505, 19094762, 19107128, 19094777, 19092251, 19105088, 19101309, 19099091, 19106980, 19085244, 19099205, 19100828, 19084192, 19091440, 19084059, 19089326, 19085214, 19084880, 19107564, 19084773, 19099538, 19095911, 19107398, 19094548, 19091398, 19087465, 19085231, 19085530, 19096511, 19093555, 19088350, 19089739, 19105125, 19086893, 19090837, 19093783, 19094945, 19101726, 19107873, 19094283, 19098530, 19099474, 19084413, 19087871, 19085526, 19099879, 19084333, 19107675, 19107673, 19089543, 19084587, 19101846, 19084147, 19089417, 19089614, 19087087, 19091565, 19084525, 19105306, 19089898, 19084216, 19084260, 19090006, 19090060, 19099150, 19095720, 19084650, 19089038, 19086211, 19085201, 19084102, 19091778, 19106850, 19091642, 19100718, 19098926, 19102036, 19091731, 19084190, 19106578, 19094162, 19095424, 19084752, 19095576, 19087096, 19085802, 19087150, 19086148, 19097613, 19085520, 19097064, 19100727, 19094832, 19087146, 19085189, 19089389, 19096308, 19085224, 19089474, 19091852, 19098952, 19103518, 19101996, 19101890, 19098764, 19100681, 19105057, 19083886, 19104298, 19096623, 19101813, 19097132, 19103522, 19101369, 19096706, 19086916, 19084640, 19100372, 19101355, 19100205, 19085924, 19098539, 19088908, 19102399, 19100665, 19100642, 19085237, 19107608, 19099976, 19104524, 19096915, 19102977, 19088941, 19094228, 19095403, 19100808, 19099398, 19099923, 19100950, 19091075, 19102081, 19087442, 19085663, 19084023, 19100576, 19096703, 19091955, 19099844, 19091793, 19088513, 19096821, 19095090, 19085891, 19096410, 19087717, 19086764, 19095770, 19092235, 19086058, 19091942, 19099384, 19089371, 19095537, 19101529, 19103089, 19103203, 19089860, 19088457, 19090284, 19091184, 19084099, 19093860, 19089694, 19106533, 19097483, 19083877, 19085040, 19088417, 19093841, 19094555, 19102436, 19096324, 19086212, 19090709, 19095645, 19107302, 19099026, 19085995, 19097961, 19097943, 19096912, 19092315, 19100907, 19097592, 19100220, 19089580, 19100089, 19095093, 19093378, 19099157, 19089398, 19103858, 19092780, 19100749, 19094015, 19090280, 19093711, 19089745, 19083950, 19089286, 19110002, 19087333, 19091766, 19090686, 19091714, 19094666, 19085562, 19089360, 19097522, 19088712, 19085508, 19085772, 19087126, 19091407, 19093652, 19086530, 19092736, 19089236, 19088598, 19083905, 19084760, 19095036, 19084209, 19098141, 19086772, 19086616, 19086459, 19085158, 19084764, 19110914, 19095780, 19104965, 19084636, 19108757, 19105272, 19092787, 19094129, 19104855]<br />
</pre></p>
<p>Now let&#8217;s say that we wanted to get the stories for just the top 10</p>
<h3 class="file-heading"><em>request_top_10.py</em></h3>
<pre class="file">import requests

response = requests.get('https://hacker-news.firebaseio.com/v0/topstories.json?print=pretty')

# Get top 10 ids
top_ten_ids = response.json()[:10]

print('Top ten ids:', top_ten_ids)

# Fetch top 10 stories

stories = []
for id in top_ten_ids:
  curr_story_api_url = 'https://hacker-news.firebaseio.com/v0/item/{}.json?print=pretty'.format(id)
  curr_story = requests.get(curr_story_api_url)
  stories.append(curr_story.json())

print('Top ten stories:', stories)
</pre>
<h3><b>Execute:</b></h3>
<pre class="instructions">python3 request_top_10.py</pre>
<h3><b>Output:</b></h3>
<pre class="sample">
<div class="sample_command">$ python3 request_top_10.py</div>
<p>Top ten ids: [19105733, 19110698, 19109474, 19109027, 19108787, 19106922, 19109371, 19106771, 19110215, 19108206]<br />
Top ten stories: [{&#8217;by&#8217;: &#8216;jamesjyu&#8217;, &#8216;descendants&#8217;: 312, &#8216;id&#8217;: 19105733, &#8216;kids&#8217;: [19106256, 19106188, 19108337, 19106780, 19106961, 19111508, 19106759, 19107101, 19111378, 19106033, 19107658, 19106858, 19106342, 19107631, 19110845, 19107190, 19106061, 19105943, 19107032, 19107184, 19106501, 19106621, 19106515, 19110407, 19110486, 19106911, 19107118, 19110459, 19106352, 19106861, 19110396, 19106943, 19111098, 19109002, 19107252, 19106636, 19108190, 19108256, 19106688, 19107567, 19109358, 19109250, 19106939, 19109563, 19106774, 19109835, 19110931, 19108617, 19107292, 19108916, 19108268, 19108361, 19109059, 19107097, 19109600, 19106132, 19107408, 19107110, 19106787, 19108918, 19107137, 19106611, 19106788, 19106265, 19106763, 19107301, 19107114, 19109798, 19109725, 19109724, 19108716, 19109042, 19108399, 19106952, 19109711, 19107159, 19107498, 19107819, 19110562, 19106477, 19111075], &#8216;score&#8217;: 1642, &#8216;time&#8217;: 1549553290, &#8216;title&#8217;: &#8216;Reflecting on My Failure to Build a Billion-Dollar Company&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://medium.com/@shl/reflecting-on-my-failure-to-build-a-billion-dollar-company-b0c31d7db0e7&#8217;}, {&#8217;by&#8217;: &#8216;peter_d_sherman&#8217;, &#8216;descendants&#8217;: 14, &#8216;id&#8217;: 19110698, &#8216;kids&#8217;: [19111199, 19111494, 19111273, 19111485, 19111162, 19111440, 19111152, 19111390, 19111330, 19110988, 19111056], &#8216;score&#8217;: 84, &#8216;time&#8217;: 1549590878, &#8216;title&#8217;: &#8216;FindChips – Get instant insight into any electronic component&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.findchips.com/&#8217;}, {&#8217;by&#8217;: &#8216;coloneltcb&#8217;, &#8216;descendants&#8217;: 231, &#8216;id&#8217;: 19109474, &#8216;kids&#8217;: [19109809, 19109656, 19110478, 19110033, 19109727, 19110057, 19111462, 19109527, 19110199, 19109819, 19110920, 19110176, 19111198, 19109970, 19110460, 19111465, 19110369, 19110421, 19110139, 19109899, 19110064, 19111349, 19109984, 19109884, 19110124, 19109999, 19110504, 19110249, 19110054, 19110226, 19110320, 19109980, 19110411, 19110462, 19109956, 19109872, 19110224, 19109882, 19110048, 19110096], &#8216;score&#8217;: 938, &#8216;time&#8217;: 1549579936, &#8216;title&#8217;: &#8216;No Thank You, Mr. Pecker&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://medium.com/@jeffreypbezos/no-thank-you-mr-pecker-146e3922310f&#8217;}, {&#8217;by&#8217;: &#8216;jbegley&#8217;, &#8216;descendants&#8217;: 190, &#8216;id&#8217;: 19109027, &#8216;kids&#8217;: [19109269, 19109136, 19109243, 19110038, 19109612, 19109511, 19111510, 19109370, 19109804, 19109184, 19110589, 19109978, 19111088, 19111301, 19109209, 19109747, 19109588, 19110357, 19109331, 19109565, 19110367, 19110428, 19109726, 19110049, 19109462, 19110751, 19110560, 19109825, 19109794, 19109718, 19109846, 19109105, 19109810, 19109491, 19109153], &#8216;score&#8217;: 354, &#8216;time&#8217;: 1549576959, &#8216;title&#8217;: &#8217; Apple tells app developers to disclose or remove screen recording code&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://techcrunch.com/2019/02/07/apple-glassbox-apps/&#8217;}, {&#8217;by&#8217;: &#8216;jaxxstorm&#8217;, &#8216;descendants&#8217;: 153, &#8216;id&#8217;: 19108787, &#8216;kids&#8217;: [19109540, 19109135, 19109442, 19110180, 19109094, 19109163, 19111501, 19109981, 19108930, 19111302, 19108950, 19109031, 19109030, 19110930, 19109099, 19110120, 19109095, 19110079, 19109464, 19109038, 19109228], &#8216;score&#8217;: 112, &#8216;time&#8217;: 1549575119, &#8216;title&#8217;: &#8216;Why are we templating <span class="caps">YAML</span>?&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://leebriggs.co.uk/blog/2019/02/07/why-are-we-templating-yaml.html&#8217;}, {&#8217;by&#8217;: &#8216;antibland&#8217;, &#8216;descendants&#8217;: 148, &#8216;id&#8217;: 19106922, &#8216;kids&#8217;: [19109424, 19108378, 19108119, 19107570, 19108681, 19108015, 19108525, 19108723, 19107972, 19108580, 19107575, 19107864, 19109576, 19109281, 19107997, 19110018, 19107919, 19110195, 19109602, 19108072, 19111138, 19110519, 19107929, 19108668, 19110190, 19109022, 19108456, 19108549, 19108518, 19109294, 19109353, 19109435, 19108328, 19110636, 19108496, 19109109, 19108325, 19109448], &#8216;score&#8217;: 257, &#8216;time&#8217;: 1549562224, &#8216;title&#8217;: &#8216;<span class="caps">HTML</span>, <span class="caps">CSS</span> and our vanishing industry entry points&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://rachelandrew.co.uk/archives/2019/01/30/html-css-and-our-vanishing-industry-entry-points/&#8217;}, {&#8217;by&#8217;: &#8216;zdw&#8217;, &#8216;descendants&#8217;: 18, &#8216;id&#8217;: 19109371, &#8216;kids&#8217;: [19110316, 19110302, 19110806, 19110867, 19110976, 19110743, 19110291, 19110365, 19110691, 19110491], &#8216;score&#8217;: 67, &#8216;time&#8217;: 1549579307, &#8216;title&#8217;: &#8216;German for Programmers&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://wickedchicken.github.io/post/german-for-programmers/&#8217;}, {&#8217;by&#8217;: &#8216;markoa&#8217;, &#8216;descendants&#8217;: 70, &#8216;id&#8217;: 19106771, &#8216;kids&#8217;: [19108621, 19106876, 19107825, 19109398, 19107212, 19107078, 19106940, 19107401, 19107071], &#8216;score&#8217;: 231, &#8216;time&#8217;: 1549561051, &#8216;title&#8217;: &#8216;Open-Sourcing ClusterFuzz&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://opensource.googleblog.com/2019/02/open-sourcing-clusterfuzz.html&#8217;}, {&#8217;by&#8217;: &#8216;zeristor&#8217;, &#8216;descendants&#8217;: 9, &#8216;id&#8217;: 19110215, &#8216;kids&#8217;: [19111067, 19111298, 19111154, 19111377, 19111303], &#8216;score&#8217;: 25, &#8216;time&#8217;: 1549586764, &#8216;title&#8217;: &#8220;Ocado&#8217;s burning robotic warehouse&#8221;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://www.bbc.co.uk/news/technology-47160448&#8217;}, {&#8217;by&#8217;: &#8216;lwhsiao&#8217;, &#8216;descendants&#8217;: 63, &#8216;id&#8217;: 19108206, &#8216;kids&#8217;: [19109235, 19109454, 19108710, 19109245, 19108949, 19109074, 19109043, 19108901, 19109093], &#8216;score&#8217;: 95, &#8216;time&#8217;: 1549570997, &#8216;title&#8217;: &#8216;Auditing Rust Crypto: The First Hours&#8217;, &#8216;type&#8217;: &#8216;story&#8217;, &#8216;url&#8217;: &#8216;https://research.kudelskisecurity.com/2019/02/07/auditing-rust-crypto-the-first-hours/&#8217;}]<br />
</pre></p>
<h2>Coding exercise</h2>
<p>1. Fetch the titles of the top 50 stories of Hacker News</p>
<p>2. Get the top 5 comments of the top 10 stories of Hacker News</p>
<p>3. Run Sentiment Analysis on the top 5 comments of the top 10 stories in hacker news</p>
        <nav class="foot-navigation">
      <a href="lab_01.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Previous
    </a>
  
      <a href="lab_03.html">
      <svg version="1.1" width="36" height="36" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"></path></svg>
      Next
    </a>
  </nav>

      </div>
    </div>
  </body>
</html>
